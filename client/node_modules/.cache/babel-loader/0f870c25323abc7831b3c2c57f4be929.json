{"ast":null,"code":"import _defineProperty from \"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeAssignment.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport ElementActions from \"../../../parts/ElementActions\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport { DELETE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport { EMPLOYEE_ASSIGNMENT_ROUTE, EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE } from \"../../../tools/routes\";\n\nclass EmployeeAssignment extends Component {\n  constructor() {\n    super();\n\n    this.changeStatus = val => {\n      const m = this.props.m;\n      console.log(m);\n\n      const updated = _objectSpread({}, m);\n\n      updated[\"status\"] = val;\n      this.setState({\n        hide: true\n      });\n      setTimeout(async () => {\n        await this.props.createAndUpdateAssignment(updated);\n        this.setState({\n          hide: false\n        });\n      }, 500);\n    };\n\n    this.goToAssignment = m => {\n      console.log(m);\n      const user = this.props.user.user;\n\n      if (user.is_manager) {\n        this.props.history.push(EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\", m.employee_id).replace(\":assignment_id\", m._id));\n      } else {\n        this.props.history.push(EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\", user._id).replace(\":assignment_id\", m._id));\n      }\n    };\n\n    this.state = {};\n  }\n\n  render() {\n    const m = this.props.m;\n    console.log(m);\n    const _this$props$user = this.props.user,\n          permissions = _this$props$user.permissions,\n          user = _this$props$user.user;\n    const hide = this.state.hide;\n    let options = [{\n      text: \"VIEW\",\n      function: this.goToAssignment,\n      param1: m\n    }, {\n      text: \"MARK_AS_PENDING\",\n      function: this.changeStatus,\n      param1: \"pending\"\n    }, {\n      text: \"MARK_AS_DONE\",\n      function: this.changeStatus,\n      param1: \"done\"\n    }, {\n      text: \"MARK_AS_PROGRESS\",\n      function: this.changeStatus,\n      param1: \"in_progress\"\n    }, {\n      text: \"REMOVE\",\n      function: this.props.handleDelete,\n      param1: m,\n      disabled: !hasPermission(user, permissions, DELETE_ASSIGNMENTS)\n    }];\n    options = options.filter(val => {\n      if (val.param1 !== m.status) return val;\n    });\n    return React.createElement(\"li\", {\n      id: hide ? \"employee__page__assignment__hidden\" : \"\",\n      className: \"employee__page__assignment flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, m.title)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Deadline\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, m.deadline ? moment(m.deadline).format(\"DD/MM/YY\") : \"-\")), React.createElement(ElementActions, {\n      width: \"150px\",\n      options: options,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }));\n  }\n\n}\n\nfunction mapStateToProps({\n  user\n}) {\n  return {\n    user\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(EmployeeAssignment));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeAssignment.jsx"],"names":["React","Component","ElementActions","moment","connect","actions","withRouter","DELETE_ASSIGNMENTS","hasPermission","EMPLOYEE_ASSIGNMENT_ROUTE","EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE","EmployeeAssignment","constructor","changeStatus","val","m","props","console","log","updated","setState","hide","setTimeout","createAndUpdateAssignment","goToAssignment","user","is_manager","history","push","replace","employee_id","_id","state","render","permissions","options","text","function","param1","handleDelete","disabled","filter","status","display","title","deadline","format","mapStateToProps"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,KAAKC,OAAZ,MAAyB,0BAAzB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,kBAAT,QAAmC,wDAAnC;AACA,SAASC,aAAT,QAA8B,yCAA9B;AACA,SACEC,yBADF,EAEEC,mCAFF,QAGO,uBAHP;;AAKA,MAAMC,kBAAN,SAAiCV,SAAjC,CAA2C;AACzCW,EAAAA,WAAW,GAAG;AACZ;;AADY,SAKdC,YALc,GAKEC,GAAD,IAAS;AAAA,YACdC,CADc,GACR,KAAKC,KADG,CACdD,CADc;AAEtBE,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAZ;;AACA,YAAMI,OAAO,qBAAQJ,CAAR,CAAb;;AACAI,MAAAA,OAAO,CAAC,QAAD,CAAP,GAAoBL,GAApB;AACA,WAAKM,QAAL,CAAc;AACZC,QAAAA,IAAI,EAAE;AADM,OAAd;AAGAC,MAAAA,UAAU,CAAC,YAAY;AACrB,cAAM,KAAKN,KAAL,CAAWO,yBAAX,CAAqCJ,OAArC,CAAN;AACA,aAAKC,QAAL,CAAc;AACZC,UAAAA,IAAI,EAAE;AADM,SAAd;AAGD,OALS,EAKP,GALO,CAAV;AAMD,KAnBa;;AAAA,SAoBdG,cApBc,GAoBIT,CAAD,IAAO;AACtBE,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAZ;AADsB,YAEdU,IAFc,GAEL,KAAKT,KAAL,CAAWS,IAFN,CAEdA,IAFc;;AAGtB,UAAIA,IAAI,CAACC,UAAT,EAAqB;AACnB,aAAKV,KAAL,CAAWW,OAAX,CAAmBC,IAAnB,CACEnB,yBAAyB,CAACoB,OAA1B,CAAkC,KAAlC,EAAyCd,CAAC,CAACe,WAA3C,EAAwDD,OAAxD,CACE,gBADF,EAEEd,CAAC,CAACgB,GAFJ,CADF;AAMD,OAPD,MAOO;AACL,aAAKf,KAAL,CAAWW,OAAX,CAAmBC,IAAnB,CACElB,mCAAmC,CAACmB,OAApC,CAA4C,KAA5C,EAAmDJ,IAAI,CAACM,GAAxD,EAA6DF,OAA7D,CACE,gBADF,EAEEd,CAAC,CAACgB,GAFJ,CADF;AAMD;AACF,KAtCa;;AAEZ,SAAKC,KAAL,GAAa,EAAb;AACD;;AAoCDC,EAAAA,MAAM,GAAG;AAAA,UACClB,CADD,GACO,KAAKC,KADZ,CACCD,CADD;AAEPE,IAAAA,OAAO,CAACC,GAAR,CAAYH,CAAZ;AAFO,6BAGuB,KAAKC,KAAL,CAAWS,IAHlC;AAAA,UAGCS,WAHD,oBAGCA,WAHD;AAAA,UAGcT,IAHd,oBAGcA,IAHd;AAAA,UAICJ,IAJD,GAIU,KAAKW,KAJf,CAICX,IAJD;AAKP,QAAIc,OAAO,GAAG,CACZ;AACEC,MAAAA,IAAI,EAAE,MADR;AAEEC,MAAAA,QAAQ,EAAE,KAAKb,cAFjB;AAGEc,MAAAA,MAAM,EAAEvB;AAHV,KADY,EAMZ;AACEqB,MAAAA,IAAI,EAAE,iBADR;AAEEC,MAAAA,QAAQ,EAAE,KAAKxB,YAFjB;AAGEyB,MAAAA,MAAM,EAAE;AAHV,KANY,EAWZ;AACEF,MAAAA,IAAI,EAAE,cADR;AAEEC,MAAAA,QAAQ,EAAE,KAAKxB,YAFjB;AAGEyB,MAAAA,MAAM,EAAE;AAHV,KAXY,EAgBZ;AACEF,MAAAA,IAAI,EAAE,kBADR;AAEEC,MAAAA,QAAQ,EAAE,KAAKxB,YAFjB;AAGEyB,MAAAA,MAAM,EAAE;AAHV,KAhBY,EAqBZ;AACEF,MAAAA,IAAI,EAAE,QADR;AAEEC,MAAAA,QAAQ,EAAE,KAAKrB,KAAL,CAAWuB,YAFvB;AAGED,MAAAA,MAAM,EAAEvB,CAHV;AAIEyB,MAAAA,QAAQ,EAAE,CAAChC,aAAa,CAACiB,IAAD,EAAOS,WAAP,EAAoB3B,kBAApB;AAJ1B,KArBY,CAAd;AA4BA4B,IAAAA,OAAO,GAAGA,OAAO,CAACM,MAAR,CAAgB3B,GAAD,IAAS;AAChC,UAAIA,GAAG,CAACwB,MAAJ,KAAevB,CAAC,CAAC2B,MAArB,EAA6B,OAAO5B,GAAP;AAC9B,KAFS,CAAV;AAIA,WACE;AACE,MAAA,EAAE,EAAEO,IAAI,GAAG,oCAAH,GAA0C,EADpD;AAEE,MAAA,SAAS,EAAC,wCAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,KAAK,EAAG;AACVsB,QAAAA,OAAO,EAAC;AADE,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK5B,CAAC,CAAC6B,KAAP,CAJF,CAJF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACA,MAAA,KAAK,EAAG;AACND,QAAAA,OAAO,EAAC;AADF,OADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK5B,CAAC,CAAC8B,QAAF,GAAa1C,MAAM,CAACY,CAAC,CAAC8B,QAAH,CAAN,CAAmBC,MAAnB,CAA0B,UAA1B,CAAb,GAAqD,GAA1D,CANF,CAVF,EAkBE,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAC,OAAtB;AAA8B,MAAA,OAAO,EAAEX,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBF,CADF;AAsBD;;AAnGwC;;AAsG3C,SAASY,eAAT,CAAyB;AAAEtB,EAAAA;AAAF,CAAzB,EAAmC;AACjC,SAAO;AAAEA,IAAAA;AAAF,GAAP;AACD;;AAED,eAAenB,UAAU,CACvBF,OAAO,CAAC2C,eAAD,EAAkB1C,OAAlB,CAAP,CAAkCM,kBAAlC,CADuB,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport ElementActions from \"../../../parts/ElementActions\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport { DELETE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport {\n  EMPLOYEE_ASSIGNMENT_ROUTE,\n  EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE,\n} from \"../../../tools/routes\";\n\nclass EmployeeAssignment extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  changeStatus = (val) => {\n    const { m } = this.props;\n    console.log(m);\n    const updated = { ...m };\n    updated[\"status\"] = val;\n    this.setState({\n      hide: true,\n    });\n    setTimeout(async () => {\n      await this.props.createAndUpdateAssignment(updated);\n      this.setState({\n        hide: false,\n      });\n    }, 500);\n  };\n  goToAssignment = (m) => {\n    console.log(m);\n    const { user } = this.props.user;\n    if (user.is_manager) {\n      this.props.history.push(\n        EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\", m.employee_id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    } else {\n      this.props.history.push(\n        EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\", user._id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    }\n  };\n  render() {\n    const { m } = this.props;\n    console.log(m);\n    const { permissions, user } = this.props.user;\n    const { hide } = this.state;\n    let options = [\n      {\n        text: \"VIEW\",\n        function: this.goToAssignment,\n        param1: m,\n      },\n      {\n        text: \"MARK_AS_PENDING\",\n        function: this.changeStatus,\n        param1: \"pending\",\n      },\n      {\n        text: \"MARK_AS_DONE\",\n        function: this.changeStatus,\n        param1: \"done\",\n      },\n      {\n        text: \"MARK_AS_PROGRESS\",\n        function: this.changeStatus,\n        param1: \"in_progress\",\n      },\n      {\n        text: \"REMOVE\",\n        function: this.props.handleDelete,\n        param1: m,\n        disabled: !hasPermission(user, permissions, DELETE_ASSIGNMENTS),\n      },\n    ];\n    options = options.filter((val) => {\n      if (val.param1 !== m.status) return val;\n    });\n\n    return (\n      <li\n        id={hide ? \"employee__page__assignment__hidden\" : \"\"}\n        className=\"employee__page__assignment flex__start\"\n      >\n        <div>\n          <h4 style ={{\n            display:'none'\n          }}>Title</h4>\n          <h3>{m.title}</h3>\n        </div>\n        <div>\n          <h4\n          style ={{\n            display:'none'\n          }}\n          >Deadline</h4>\n          <h3>{m.deadline ? moment(m.deadline).format(\"DD/MM/YY\") : \"-\"}</h3>\n        </div>\n        <ElementActions width=\"150px\" options={options} />\n      </li>\n    );\n  }\n}\n\nfunction mapStateToProps({ user }) {\n  return { user };\n}\n\nexport default withRouter(\n  connect(mapStateToProps, actions)(EmployeeAssignment)\n);\n"]},"metadata":{},"sourceType":"module"}