{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import*as actions from\"../actions/actions\";import Backendless from\"backendless\";import Dropzone from\"react-dropzone\";import AddIcon from\"@material-ui/icons/Add\";import SmallLoader from\"./SmallLoader\";import AttachmentOutlinedIcon from'@material-ui/icons/AttachmentOutlined';import CloseIcon from'@material-ui/icons/Close';Backendless.initApp(\"0C7F99A6-3715-126A-FF3C-3387261D5C00\",\"957C469D-E5DE-4C1D-8A8B-A3BE62BF1CD2\");var checkIfExist=function checkIfExist(arr,file){return arr.filter(function(m){return m.name===file.name;})[0];};var FilesUpload=/*#__PURE__*/function(_Component){_inherits(FilesUpload,_Component);function FilesUpload(){var _this;_classCallCheck(this,FilesUpload);_this=_possibleConstructorReturn(this,_getPrototypeOf(FilesUpload).call(this));_this.handleFileSelect=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(files){var property_name,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_loop,_iterator,_step;return _regeneratorRuntime.wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:property_name=_this.props.property_name;_this.setState({loading:true});_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context2.prev=5;_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(){var file;return _regeneratorRuntime.wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:file=_step.value;_context.prev=1;_context.next=4;return Backendless.Files.upload(file,'/myFiles',true).then(function(result){var url=result.fileURL;var new_file={name:file.name,url:url};var new_files=_this.props.files?_this.props.files:[];if(!checkIfExist(new_files,new_file)){new_files=[].concat(_toConsumableArray(new_files),[new_file]);_this.props.update(property_name,new_files);}});case 4:_this.setState({loading:false});_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);case 9:case\"end\":return _context.stop();}}},_loop,null,[[1,7]]);});_iterator=files[Symbol.iterator]();case 8:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context2.next=13;break;}return _context2.delegateYield(_loop(),\"t0\",10);case 10:_iteratorNormalCompletion=true;_context2.next=8;break;case 13:_context2.next=19;break;case 15:_context2.prev=15;_context2.t1=_context2[\"catch\"](5);_didIteratorError=true;_iteratorError=_context2.t1;case 19:_context2.prev=19;_context2.prev=20;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}case 22:_context2.prev=22;if(!_didIteratorError){_context2.next=25;break;}throw _iteratorError;case 25:return _context2.finish(22);case 26:return _context2.finish(19);case 27:case\"end\":return _context2.stop();}}},_callee,null,[[5,15,19,27],[20,,22,26]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.removeFile=function(file){var _this$props=_this.props,files=_this$props.files,property_name=_this$props.property_name;var new_files=files.filter(function(m){return m.name!==file.name;});_this.props.update(property_name,new_files);};_this.state={};return _this;}_createClass(FilesUpload,[{key:\"render\",value:function render(){var _this2=this;var files=this.props.files;var loading=this.state.loading;var system_text=this.props.global.system_text;return React.createElement(\"div\",{className:\"files__upload\"},loading?React.createElement(\"div\",{className:\"dropzone dropzone__loader\"},React.createElement(SmallLoader,{active:true})):React.createElement(Dropzone,{className:\"dropzone flex__start\",style:{width:\"100%\",height:\"100%\"},onDrop:function onDrop(acceptedFiles){return _this2.handleFileSelect(acceptedFiles);}},React.createElement(AttachmentOutlinedIcon,null),React.createElement(\"h5\",null,system_text.ADD_FILE)),React.createElement(\"ul\",{className:\"files__upload__list flex__start\"},files&&files.length>0?files.map(function(m){return React.createElement(\"li\",{className:\"flex__start\"},React.createElement(\"a\",{href:m.url,target:\"_blank\"},React.createElement(\"h4\",null,m.name)),React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return _this2.removeFile(m);}},React.createElement(CloseIcon,null)));}):''));}}]);return FilesUpload;}(Component);function mapStateToProps(_ref2){var global=_ref2.global;return{global:global};}export default connect(mapStateToProps,actions)(FilesUpload);","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/parts/FilesUpload.jsx"],"names":["React","Component","connect","actions","Backendless","Dropzone","AddIcon","SmallLoader","AttachmentOutlinedIcon","CloseIcon","initApp","checkIfExist","arr","file","filter","m","name","FilesUpload","handleFileSelect","files","property_name","props","setState","loading","Files","upload","then","result","url","fileURL","new_file","new_files","update","removeFile","state","system_text","global","width","height","acceptedFiles","ADD_FILE","length","map","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../actions/actions\";\nimport Backendless from \"backendless\";\nimport Dropzone from \"react-dropzone\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport SmallLoader from \"./SmallLoader\";\nimport AttachmentOutlinedIcon from '@material-ui/icons/AttachmentOutlined';\nimport CloseIcon from '@material-ui/icons/Close';\n\nBackendless.initApp(\n  \"0C7F99A6-3715-126A-FF3C-3387261D5C00\",\n  \"957C469D-E5DE-4C1D-8A8B-A3BE62BF1CD2\"\n);\n\n\n\nconst checkIfExist = (arr, file) => {\n    return arr.filter(m => m.name === file.name)[0]\n}\nclass FilesUpload extends Component {\n  constructor() {\n    super();\n    this.state = {\n       \n    };\n  }\n  handleFileSelect = async (files) => {\n      const {property_name} = this.props\n      this.setState({\n          loading:true\n      })\n   for(let file of files){\n    try {\n      await   Backendless.Files.upload(file, '/myFiles', true).then(result => {\n          let url = result.fileURL\n          let new_file = {\n              name:file.name,\n              url\n          }\n          let new_files = this.props.files ? this.props.files : []\n          if(!checkIfExist(new_files, new_file)){\n            new_files = [...new_files, new_file]\n            this.props.update(property_name, new_files)\n          }\n        })\n        this.setState({\n            loading:false\n        })\n       } catch (error) {\n         \n       }\n       \n   }\n \n      \n   }\n\n   removeFile = (file) => {\n    const {files, property_name} = this.props\n   \n    let new_files = files.filter(m => m.name !== file.name)\n    this.props.update(property_name, new_files)\n   }\n  render() {\n      const {files} = this.props\n     const {loading} = this.state\n     const {system_text} = this.props.global\n    return (\n      <div className=\"files__upload\">\n        {loading  ?\n        <div className='dropzone dropzone__loader'><SmallLoader active ={true}/></div>\n        : <Dropzone\n        className='dropzone flex__start'\n          style={{ width: \"100%\", height: \"100%\" }}\n          onDrop={(acceptedFiles) => this.handleFileSelect(acceptedFiles)}\n        ><AttachmentOutlinedIcon /><h5>{system_text.ADD_FILE}</h5></Dropzone>}\n\n        <ul className='files__upload__list flex__start'>\n        {\n            files && files.length > 0 ? \n                files.map(m => {\n                return <li className='flex__start'>\n                    <a href={m.url} target='_blank'>\n                    <h4>{m.name}</h4>\n                    </a>\n                    <button \n                    type ='button'\n                    onClick = {() => this.removeFile(m)}><CloseIcon /></button>\n                    </li>\n                })\n            :''\n        }\n        </ul>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({  global }) {\n  return {  global };\n}\n\nexport default connect(mapStateToProps, actions)(FilesUpload);\n"]},"metadata":{},"sourceType":"module"}