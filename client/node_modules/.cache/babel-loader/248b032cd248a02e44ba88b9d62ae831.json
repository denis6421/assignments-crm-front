{"ast":null,"code":"import _defineProperty from \"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeAssignment.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport ElementActions from \"../../../parts/ElementActions\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport { DELETE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport { EMPLOYEE_ASSIGNMENT_ROUTE, EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE, PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT } from \"../../../tools/routes\";\nimport \"moment/locale/he\";\n\nclass EmployeeAssignment extends Component {\n  constructor() {\n    super();\n\n    this.changeStatus = val => {\n      const m = this.props.m;\n      console.log(m);\n\n      const updated = _objectSpread({}, m);\n\n      updated[\"status\"] = val;\n      this.setState({\n        hide: true\n      });\n      setTimeout(async () => {\n        await this.props.createAndUpdateAssignment(updated);\n        this.setState({\n          hide: false\n        });\n      }, 500);\n    };\n\n    this.goToAssignment = m => {\n      const manager_assignments = this.props.manager_assignments;\n      const user = this.props.user.user;\n\n      if (manager_assignments) {\n        this.props.history.push(PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT.replace(\":assignment_id\", m._id));\n      } else if (user.is_manager) {\n        this.props.history.push(EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\", m.employee_id).replace(\":assignment_id\", m._id));\n      } else {\n        this.props.history.push(EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\", user._id).replace(\":assignment_id\", m._id));\n      }\n    };\n\n    this.state = {};\n  }\n\n  render() {\n    const m = this.props.m;\n    const _this$props$user = this.props.user,\n          permissions = _this$props$user.permissions,\n          user = _this$props$user.user;\n    const hide = this.state.hide;\n    const language = this.props.global.language;\n    let options = [{\n      text: \"VIEW\",\n      function: this.goToAssignment,\n      param1: m\n    }, {\n      text: \"MARK_AS_PENDING\",\n      function: this.changeStatus,\n      param1: \"pending\"\n    }, {\n      text: \"MARK_AS_DONE\",\n      function: this.changeStatus,\n      param1: \"done\"\n    }, {\n      text: \"MARK_AS_PROGRESS\",\n      function: this.changeStatus,\n      param1: \"in_progress\"\n    }, {\n      text: \"REMOVE\",\n      function: this.props.handleDelete,\n      param1: m,\n      disabled: !hasPermission(user, permissions, DELETE_ASSIGNMENTS)\n    }];\n    options = options.filter(val => {\n      if (val.param1 !== m.status) return val;\n    });\n    return React.createElement(\"li\", {\n      id: hide ? \"employee__page__assignment__hidden\" : \"\",\n      className: \"employee__page__assignment flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, m.title)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Deadline\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, m.deadline ? moment(m.deadline).locale(language.substring(0, 2)).format(\"ddd, LL\") : \"-\")), React.createElement(ElementActions, {\n      width: \"150px\",\n      options: options,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }));\n  }\n\n}\n\nfunction mapStateToProps({\n  user,\n  global\n}) {\n  return {\n    user,\n    global\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(EmployeeAssignment));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeAssignment.jsx"],"names":["React","Component","ElementActions","moment","connect","actions","withRouter","DELETE_ASSIGNMENTS","hasPermission","EMPLOYEE_ASSIGNMENT_ROUTE","EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE","PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT","EmployeeAssignment","constructor","changeStatus","val","m","props","console","log","updated","setState","hide","setTimeout","createAndUpdateAssignment","goToAssignment","manager_assignments","user","history","push","replace","_id","is_manager","employee_id","state","render","permissions","language","global","options","text","function","param1","handleDelete","disabled","filter","status","display","title","deadline","locale","substring","format","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ElementActions from \"../../../parts/ElementActions\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport { DELETE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport {\n  EMPLOYEE_ASSIGNMENT_ROUTE,\n  EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE,\n  PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT,\n} from \"../../../tools/routes\";\nimport \"moment/locale/he\";\n\n\n\nclass EmployeeAssignment extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  changeStatus = (val) => {\n    const { m } = this.props;\n    console.log(m);\n    const updated = { ...m };\n    updated[\"status\"] = val;\n    this.setState({\n      hide: true,\n    });\n    setTimeout(async () => {\n      await this.props.createAndUpdateAssignment(updated);\n      this.setState({\n        hide: false,\n      });\n    }, 500);\n  };\n  goToAssignment = (m) => {\n  const {manager_assignments} = this.props\n \n    const { user } = this.props.user;\n    if(manager_assignments){\n      this.props.history.push(\n        PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT.replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    }\n    else if ( user.is_manager) {\n      this.props.history.push(\n        EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\", m.employee_id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    } else {\n      this.props.history.push(\n        EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\", user._id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    }\n  };\n  render() {\n    const { m } = this.props;\n    const { permissions, user } = this.props.user;\n    const { hide } = this.state;\n    const {language} = this.props.global;\n    let options = [\n      {\n        text: \"VIEW\",\n        function: this.goToAssignment,\n        param1: m,\n      },\n      {\n        text: \"MARK_AS_PENDING\",\n        function: this.changeStatus,\n        param1: \"pending\",\n      },\n      {\n        text: \"MARK_AS_DONE\",\n        function: this.changeStatus,\n        param1: \"done\",\n      },\n      {\n        text: \"MARK_AS_PROGRESS\",\n        function: this.changeStatus,\n        param1: \"in_progress\",\n      },\n      {\n        text: \"REMOVE\",\n        function: this.props.handleDelete,\n        param1: m,\n        disabled: !hasPermission(user, permissions, DELETE_ASSIGNMENTS),\n      },\n    ];\n\n\n    options = options.filter((val) => {\n      if (val.param1 !== m.status) return val;\n    });\n\n    return (\n  <li\n        id={hide ? \"employee__page__assignment__hidden\" : \"\"}\n        className=\"employee__page__assignment flex__start\"\n      >\n        <div>\n          <h4 style ={{\n            display:'none'\n          }}>Title</h4>\n          <h3>{m.title}</h3>\n        </div>\n        <div>\n          <h4\n          style ={{\n            display:'none'\n          }}\n          >Deadline</h4>\n          <h3>{m.deadline ? moment(m.deadline)\n                    .locale(language.substring(0, 2))\n                    .format(\"ddd, LL\") : \"-\"}</h3>\n        </div>\n        <ElementActions width=\"150px\" options={options} />\n      </li> \n    );\n  }\n}\n\nfunction mapStateToProps({ user,global }) {\n  return { user,global };\n}\n\nexport default withRouter(\n  connect(mapStateToProps, actions)(EmployeeAssignment)\n);\n"]},"metadata":{},"sourceType":"module"}