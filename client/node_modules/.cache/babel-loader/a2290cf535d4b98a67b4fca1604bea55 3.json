{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Editor}from\"react-draft-wysiwyg\";import\"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";import{convertFromRaw,convertToRaw,EditorState}from\"draft-js\";var DraftInput=/*#__PURE__*/function(_Component){_inherits(DraftInput,_Component);function DraftInput(){var _this;_classCallCheck(this,DraftInput);_this=_possibleConstructorReturn(this,_getPrototypeOf(DraftInput).call(this));_this.createContent=function(value){var comments=\"\";if(value){var content=convertFromRaw(JSON.parse(value));comments=EditorState.createWithContent(content);}_this.setState({comments:comments});};_this.onEditorStateChange=function(val){_this.setState({comments:val});window.clearTimeout(_this.state.timeout);var timeout=setTimeout(function(){_this.save(val);},200);_this.setState({timeout:timeout});};_this.saveContent=function(content){return JSON.stringify(convertToRaw(content.getCurrentContent()));};_this.save=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(comments){var property_name,rawDraftContentState;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:property_name=_this.props.property_name;_context.next=3;return _this.saveContent(comments);case 3:rawDraftContentState=_context.sent;_this.props.handleUpdate(property_name,rawDraftContentState);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={};return _this;}_createClass(DraftInput,[{key:\"componentDidMount\",value:function componentDidMount(){var value=this.props.value;this.setState({loaded:true});this.createContent(value);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.updated!==this.props.updated){this.createContent(nextProps.value);}}},{key:\"render\",value:function render(){var comments=this.state.comments;var _this$props=this.props,label=_this$props.label,system_text=_this$props.system_text;return React.createElement(\"div\",{className:\"draft__content\"},React.createElement(Editor,{editorState:comments,toolbarClassName:\"toolbarClassName\",wrapperClassName:\"wrapperClassName\",editorClassName:\"editorClassName\",onEditorStateChange:this.onEditorStateChange,placeholder:system_text[label]}));}}]);return DraftInput;}(Component);export default DraftInput;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/parts/inputs/DraftInput.jsx"],"names":["React","Component","Editor","convertFromRaw","convertToRaw","EditorState","DraftInput","createContent","value","comments","content","JSON","parse","createWithContent","setState","onEditorStateChange","val","window","clearTimeout","state","timeout","setTimeout","save","saveContent","stringify","getCurrentContent","property_name","props","rawDraftContentState","handleUpdate","loaded","nextProps","updated","label","system_text"],"mappings":"qpCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,MAAO,kDAAP,CACA,OAASC,cAAT,CAAyBC,YAAzB,CAAuCC,WAAvC,KAA0D,UAA1D,C,GAEMC,CAAAA,U,oEACJ,qBAAc,4CACZ,8EADY,MAkBdC,aAlBc,CAkBE,SAACC,KAAD,CAAU,CACxB,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAID,KAAJ,CAAW,CACT,GAAIE,CAAAA,OAAO,CAAGP,cAAc,CAACQ,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAD,CAA5B,CAEAC,QAAQ,CAAGJ,WAAW,CAACQ,iBAAZ,CAA8BH,OAA9B,CAAX,CACD,CACD,MAAKI,QAAL,CAAc,CACZL,QAAQ,CAARA,QADY,CAAd,EAGD,CA5Ba,OA8BdM,mBA9Bc,CA8BQ,SAACC,GAAD,CAAS,CAC7B,MAAKF,QAAL,CAAc,CACZL,QAAQ,CAAEO,GADE,CAAd,EAGAC,MAAM,CAACC,YAAP,CAAoB,MAAKC,KAAL,CAAWC,OAA/B,EACA,GAAMA,CAAAA,OAAO,CAAGC,UAAU,CAAC,UAAM,CAC/B,MAAKC,IAAL,CAAUN,GAAV,EACD,CAFyB,CAEvB,GAFuB,CAA1B,CAGA,MAAKF,QAAL,CAAc,CACZM,OAAO,CAAPA,OADY,CAAd,EAGD,CAzCa,OA0CdG,WA1Cc,CA0CA,SAACb,OAAD,CAAa,CACzB,MAAOC,CAAAA,IAAI,CAACa,SAAL,CAAepB,YAAY,CAACM,OAAO,CAACe,iBAAR,EAAD,CAA3B,CAAP,CACD,CA5Ca,OA6CdH,IA7Cc,0FA6CP,iBAAOb,QAAP,yJACGiB,aADH,CACqB,MAAKC,KAD1B,CACGD,aADH,uBAE8B,OAAKH,WAAL,CAAiBd,QAAjB,CAF9B,QAECmB,oBAFD,eAGL,MAAKD,KAAL,CAAWE,YAAX,CAAwBH,aAAxB,CAAuCE,oBAAvC,EAHK,sDA7CO,+DAEZ,MAAKT,KAAL,CAAa,EAAb,CAFY,aAGb,C,oFAEmB,IACVX,CAAAA,KADU,CACA,KAAKmB,KADL,CACVnB,KADU,CAElB,KAAKM,QAAL,CAAc,CACZgB,MAAM,CAAE,IADI,CAAd,EAGA,KAAKvB,aAAL,CAAmBC,KAAnB,EACD,C,4EACyBuB,S,CAAU,CAClC,GAAGA,SAAS,CAACC,OAAV,GAAsB,KAAKL,KAAL,CAAWK,OAApC,CAA4C,CAC1C,KAAKzB,aAAL,CAAmBwB,SAAS,CAACvB,KAA7B,EACD,CACF,C,uCAmCQ,IACCC,CAAAA,QADD,CACc,KAAKU,KADnB,CACCV,QADD,iBAGwB,KAAKkB,KAH7B,CAGCM,KAHD,aAGCA,KAHD,CAGQC,WAHR,aAGQA,WAHR,CAKP,MACE,4BAAK,SAAS,CAAC,gBAAf,EACE,oBAAC,MAAD,EACE,WAAW,CAAEzB,QADf,CAEE,gBAAgB,CAAC,kBAFnB,CAGE,gBAAgB,CAAC,kBAHnB,CAIE,eAAe,CAAC,iBAJlB,CAKE,mBAAmB,CAAE,KAAKM,mBAL5B,CAME,WAAW,CAAEmB,WAAW,CAACD,KAAD,CAN1B,EADF,CADF,CAYD,C,wBArEsBhC,S,EAwEzB,cAAeK,CAAAA,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nclass DraftInput extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const { value } = this.props;\n    this.setState({\n      loaded: true,\n    });\n    this.createContent(value)\n  }\n  componentWillReceiveProps(nextProps){\n    if(nextProps.updated !== this.props.updated){\n      this.createContent(nextProps.value)\n    }\n  }\n\n  createContent = (value) =>{\n    let comments = \"\";\n    if (value) {\n      let content = convertFromRaw(JSON.parse(value));\n\n      comments = EditorState.createWithContent(content);\n    }\n    this.setState({\n      comments,\n    });\n  }\n\n  onEditorStateChange = (val) => {\n    this.setState({\n      comments: val,\n    });\n    window.clearTimeout(this.state.timeout);\n    const timeout = setTimeout(() => {\n      this.save(val);\n    }, 200);\n    this.setState({\n      timeout,\n    });\n  };\n  saveContent = (content) => {\n    return JSON.stringify(convertToRaw(content.getCurrentContent()));\n  };\n  save = async (comments) => {\n    const { property_name } = this.props;\n    const rawDraftContentState = await this.saveContent(comments);\n    this.props.handleUpdate(property_name, rawDraftContentState);\n  };\n\n  render() {\n    const { comments } = this.state;\n\n    const { label, system_text } = this.props;\n\n    return (\n      <div className=\"draft__content\">\n        <Editor\n          editorState={comments}\n          toolbarClassName=\"toolbarClassName\"\n          wrapperClassName=\"wrapperClassName\"\n          editorClassName=\"editorClassName\"\n          onEditorStateChange={this.onEditorStateChange}\n          placeholder={system_text[label]}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DraftInput;\n"]},"metadata":{},"sourceType":"module"}