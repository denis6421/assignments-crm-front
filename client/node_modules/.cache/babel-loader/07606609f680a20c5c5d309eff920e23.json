{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeTodoList.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport EmployeeAssignment from \"./EmployeeAssignment\";\nimport AssignmentLoader from \"../../assignments/parts/AssignmentLoader\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport { CREATE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { filterEmployeeAssignments } from \"../../../functions/employe_assignments_functions\";\nimport NoData from \"../../../parts/NoData\";\nimport LibraryAddOutlinedIcon from '@material-ui/icons/LibraryAddOutlined';\nimport BtnWithTooltip from \"../../../parts/BtnWithTooltip\";\n\nconst getAssignmentsAmount = (arr, value) => {\n  if (arr && arr.length > 0) {\n    let num = 0;\n    arr.forEach(element => {\n      if (element.status === value) {\n        num++;\n      }\n    });\n    return num;\n  } else {\n    return 0;\n  }\n};\n\nclass EmployeeTodoList extends Component {\n  constructor() {\n    super();\n\n    this.handleFilter = val => {\n      this.setState({\n        status: val\n      });\n    };\n\n    this.toggleAssignmentsList = val => {\n      this.setState({\n        show_assignments: val\n      });\n    };\n\n    this.updateState = (name, value) => {\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.openCreateAssignment = () => {\n      this.props.handleAssignment(true, true);\n    };\n\n    this.state = {\n      status: \"pending\"\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.setState({\n        page_loaded: true\n      });\n    }, 20);\n  }\n\n  componentWillUnmount() {\n    this.toggleAssignmentsList(false);\n  }\n\n  render() {\n    const _this$props = this.props,\n          employee = _this$props.employee,\n          assignments_loaded = _this$props.assignments_loaded;\n    const _this$props$user = this.props.user,\n          user = _this$props$user.user,\n          permissions = _this$props$user.permissions;\n    const _this$state = this.state,\n          status = _this$state.status,\n          page_loaded = _this$state.page_loaded;\n    const system_text = this.props.global.system_text;\n    return React.createElement(\"div\", {\n      style: {\n        opacity: page_loaded ? 1 : 0\n      },\n      className: \"employee__page__assignments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"page__flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"employee__page__assignments__header flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, hasPermission(user, permissions, CREATE_ASSIGNMENTS) ? React.createElement(BtnWithTooltip, {\n      svg: React.createElement(LibraryAddOutlinedIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }),\n      handleClick: () => this.props.handleAssignment(true),\n      tooltip: system_text.CREATE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }) : \"\"), React.createElement(\"div\", {\n      className: \"employee__page__assignments__flex \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"flex__start\",\n      id: \"employee__page__assignments__actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, system_text.ASSIGNMENT_STATUS_ARR.map((m, i) => {\n      return React.createElement(\"li\", {\n        key: i,\n        className: \"flex__center\",\n        id: status === m.value ? 'employee__page__assignments__actions--active' : '',\n        onClick: () => this.handleFilter(m.value),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, m.img, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \" \", m.text), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"(\", getAssignmentsAmount(employee.assignments, m.value), \")\"));\n    })), filterEmployeeAssignments(employee.assignments, status) ? React.createElement(\"section\", {\n      id: \"employee__assignments__titles\",\n      className: \"flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, system_text.EMPLOYEE_ASSIGNMENTS_TITLES.map((m, i) => {\n      return React.createElement(\"h3\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, m);\n    })) : null, React.createElement(\"ul\", {\n      className: \"flex__start\",\n      id: \"employee__assignments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, !assignments_loaded ? React.createElement(AssignmentLoader, {\n      arr: [...Array(3).keys()],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }) : assignments_loaded && !filterEmployeeAssignments(employee.assignments, status) ? React.createElement(NoData, {\n      create: this.openCreateAssignment,\n      text: system_text.NO_ASSIGNMENTS,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }) : filterEmployeeAssignments(employee.assignments, status).map(m => {\n      return React.createElement(EmployeeAssignment, {\n        key: m._id,\n        m: m,\n        createAndUpdateAssignment: this.props.createAndUpdateAssignment,\n        handleAssignment: this.props.handleAssignment,\n        handleDelete: this.props.handleDelete,\n        key: m._id,\n        handleAssignmentComments: this.props.handleAssignmentComments,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      });\n    })))));\n  }\n\n}\n\nfunction mapStateToProps({\n  employees,\n  assignments,\n  user,\n  global\n}) {\n  return {\n    employees,\n    assignments,\n    user,\n    global\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(EmployeeTodoList));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeTodoList.jsx"],"names":["React","Component","connect","actions","withRouter","EmployeeAssignment","AssignmentLoader","hasPermission","CREATE_ASSIGNMENTS","filterEmployeeAssignments","NoData","LibraryAddOutlinedIcon","BtnWithTooltip","getAssignmentsAmount","arr","value","length","num","forEach","element","status","EmployeeTodoList","constructor","handleFilter","val","setState","toggleAssignmentsList","show_assignments","updateState","name","openCreateAssignment","props","handleAssignment","state","componentDidMount","setTimeout","page_loaded","componentWillUnmount","render","employee","assignments_loaded","user","permissions","system_text","global","opacity","CREATE","ASSIGNMENT_STATUS_ARR","map","m","i","img","text","assignments","EMPLOYEE_ASSIGNMENTS_TITLES","Array","keys","NO_ASSIGNMENTS","_id","createAndUpdateAssignment","handleDelete","handleAssignmentComments","mapStateToProps","employees"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport EmployeeAssignment from \"./EmployeeAssignment\";\nimport AssignmentLoader from \"../../assignments/parts/AssignmentLoader\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport { CREATE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { filterEmployeeAssignments } from \"../../../functions/employe_assignments_functions\";\nimport NoData from \"../../../parts/NoData\";\nimport LibraryAddOutlinedIcon from '@material-ui/icons/LibraryAddOutlined';\nimport BtnWithTooltip from \"../../../parts/BtnWithTooltip\";\n\n\nconst getAssignmentsAmount = (arr, value) => {\n  if (arr && arr.length > 0) {\n    let num = 0;\n    arr.forEach((element) => {\n      if (element.status === value) {\n        num++;\n      }\n    });\n    return num;\n  } else {\n    return 0;\n  }\n};\n\nclass EmployeeTodoList extends Component {\n  constructor() {\n    super();\n    this.state = {\n      status: \"pending\",\n    };\n  }\n  componentDidMount() {\n    setTimeout(() => {\n      this.setState({\n        page_loaded: true,\n      });\n    }, 20);\n  }\n  handleFilter = (val) => {\n    this.setState({\n      status: val,\n    });\n  };\n  componentWillUnmount() {\n    this.toggleAssignmentsList(false);\n  }\n  toggleAssignmentsList = (val) => {\n    this.setState({\n      show_assignments: val,\n    });\n  };\n\n  updateState = (name, value) => {\n    this.setState({\n      [name]: value,\n    });\n  };\n  openCreateAssignment = () => {\n    this.props.handleAssignment(true, true);\n  };\n  render() {\n    const { employee, assignments_loaded } = this.props;\n    const { user, permissions } = this.props.user;\n    const { status, page_loaded } = this.state;\n    const { system_text } = this.props.global;\n    return (\n      <div\n        style={{\n          opacity: page_loaded ? 1 : 0,\n        }}\n        className=\"employee__page__assignments\"\n      >\n        <div className=\"page__flex\">\n          <header className=\"employee__page__assignments__header flex__start\">\n            {hasPermission(user, permissions, CREATE_ASSIGNMENTS) ? (\n            \n                <BtnWithTooltip\n               svg = {<LibraryAddOutlinedIcon />}\n               handleClick = {() => this.props.handleAssignment(true)}\n               tooltip = {system_text.CREATE}\n                />\n    \n           \n            ) : (\n              \"\"\n            )}\n          </header>\n          <div className=\"employee__page__assignments__flex \">\n            <ul\n              className=\"flex__start\"\n              id=\"employee__page__assignments__actions\"\n            >\n              {system_text.ASSIGNMENT_STATUS_ARR.map((m, i) => {\n                return (\n                  <li\n                    key={i}\n                    className=\"flex__center\"\n                    id = {status === m.value ? 'employee__page__assignments__actions--active' : ''}\n                    onClick={() => this.handleFilter(m.value)}\n                  >\n                    {m.img}\n                    <h3> {m.text}</h3>\n                    <h5>\n                      ({getAssignmentsAmount(employee.assignments, m.value)})\n                    </h5>\n                  </li>\n                );\n              })}\n            </ul>\n            {filterEmployeeAssignments(employee.assignments, status) ? (\n              <section\n                id=\"employee__assignments__titles\"\n                className=\"flex__start\"\n              >\n               {system_text.EMPLOYEE_ASSIGNMENTS_TITLES.map((m,i) => {\n                 return <h3 key = {i}>{m}</h3>\n               })}\n              </section>\n            ) : null}\n            <ul className=\"flex__start\" id=\"employee__assignments\">\n              {!assignments_loaded ? (\n                <AssignmentLoader arr={[...Array(3).keys()]} />\n              ) : assignments_loaded &&\n                !filterEmployeeAssignments(employee.assignments, status) ? (\n                <NoData\n                  create={this.openCreateAssignment}\n                  text={system_text.NO_ASSIGNMENTS}\n                />\n              ) : (\n                filterEmployeeAssignments(employee.assignments, status).map(\n                  (m) => {\n                    return (\n                      <EmployeeAssignment\n                        key={m._id}\n                        m={m}\n                        createAndUpdateAssignment={\n                          this.props.createAndUpdateAssignment\n                        }\n                        handleAssignment={this.props.handleAssignment}\n                        handleDelete={this.props.handleDelete}\n                        key={m._id}\n                        handleAssignmentComments={\n                          this.props.handleAssignmentComments\n                        }\n                      />\n                    );\n                  }\n                )\n              )}\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ employees, assignments, user, global }) {\n  return { employees, assignments, user, global };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(EmployeeTodoList));\n"]},"metadata":{},"sourceType":"module"}