{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/todo/front/client/src/components/assignments/AssignmentTemplates.jsx\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../actions/actions\";\nimport Assignment from \"./parts/Assignment\";\nimport HandleAssignment from \"./parts/HandleAssignment\";\nimport PopupWithFunction from \"../../parts/PopupWithFunction\";\nimport { apiPostRequest, apiGetRequest } from \"../../tools/api\";\nimport AssignmentLoader from \"./parts/AssignmentLoader\";\nimport LibraryAddOutlinedIcon from '@material-ui/icons/LibraryAddOutlined';\nimport BtnWithTooltip from \"../../parts/BtnWithTooltip\";\nimport NoData from \"../../parts/NoData\";\n\nclass AssignmentTemplates extends Component {\n  constructor() {\n    super();\n\n    this.toggleHandleAssignment = (status, assignment_to_edit) => {\n      this.setState({\n        handle_assignment: status,\n        assignment_to_edit\n      });\n    };\n\n    this.handleRemove = assignment_to_remove => {\n      this.setState({\n        assignment_to_remove\n      });\n    };\n\n    this.close = () => {\n      this.setState({\n        assignment_to_remove: \"\",\n        handle_assignment: \"\"\n      });\n    };\n\n    this.remove = async () => {\n      const assignment_to_remove = this.state.assignment_to_remove;\n      const assignments_list = this.props.assignments.assignments_list;\n      this.setState({\n        remove_loading: true\n      });\n      const api = \"assignment/delete\";\n      const res = await apiPostRequest(api, {\n        id: assignment_to_remove._id\n      });\n\n      if (res.ok) {\n        this.props.removeAssignment(assignment_to_remove, assignments_list);\n        this.close();\n      }\n\n      setTimeout(() => {\n        this.setState({\n          remove_loading: false\n        });\n      }, 400);\n    };\n\n    this.create = async assignment => {\n      const system_text = this.props.global.system_text;\n      const assignments_list = this.props.assignments.assignments_list;\n      const api = \"assignment\";\n      this.setState({\n        loading: true\n      });\n      const res = await apiPostRequest(api, assignment);\n\n      if (res.ok) {\n        this.props.addAssignment(res.result, assignments_list);\n      }\n\n      this.props.updateGlobalReducer(\"success\", system_text.ASSIGNMENT_CREATE_SUCCESS);\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.edit = async assignment => {\n      const assignments_list = this.props.assignments.assignments_list;\n      const api = \"assignment\";\n      this.setState({\n        loading: true\n      });\n      const res = await apiPostRequest(api, assignment);\n\n      if (res.ok) {\n        this.props.updateAssignment(res.result, assignments_list);\n      }\n\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.state = {};\n  }\n\n  async componentDidMount() {\n    const api = \"assignment\";\n    const res = await apiGetRequest(api);\n\n    if (res.ok) {\n      this.props.setDataToAssignmentsReducer(\"assignments_list\", res.result);\n      this.setState({\n        assignments_loaded: true\n      });\n    }\n  }\n\n  render() {\n    const assignments_list = this.props.assignments.assignments_list;\n    const _this$state = this.state,\n          handle_assignment = _this$state.handle_assignment,\n          assignment_to_edit = _this$state.assignment_to_edit,\n          assignment_to_remove = _this$state.assignment_to_remove,\n          loading = _this$state.loading,\n          assignments_loaded = _this$state.assignments_loaded,\n          remove_loading = _this$state.remove_loading;\n    const system_text = this.props.global.system_text;\n    return React.createElement(\"div\", {\n      className: \"assignments flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(PopupWithFunction, {\n      text: system_text.REMOVE_TEXT,\n      name: \"\".concat(assignment_to_remove ? assignment_to_remove.title : \"\", \"?\"),\n      active: assignment_to_remove,\n      submit: this.remove,\n      close: this.close,\n      submit_text: system_text.YES,\n      close_text: system_text.NO,\n      loading: remove_loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), handle_assignment ? React.createElement(HandleAssignment, {\n      loading: loading,\n      edit: this.edit,\n      create: this.create,\n      assignment_to_edit: assignment_to_edit,\n      toggleHandleAssignment: this.toggleHandleAssignment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }) : \" \", React.createElement(BtnWithTooltip, {\n      svg: React.createElement(LibraryAddOutlinedIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }),\n      handleClick: () => this.toggleHandleAssignment(true),\n      tooltip: system_text.CREATE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"ul\", {\n      className: \"assignments__list flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, assignments_loaded && assignments_list && assignments_list.length > 0 ? assignments_list.map(m => {\n      return React.createElement(Assignment, {\n        m: m,\n        system_text: system_text,\n        handleRemove: this.handleRemove,\n        toggleHandleAssignment: this.toggleHandleAssignment,\n        key: m._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      });\n    }) : !assignments_loaded ? React.createElement(AssignmentLoader, {\n      arr: [...Array(3).keys()],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }) : React.createElement(NoData, {\n      text: system_text.NO_TEMPLATES,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    })));\n  }\n\n}\n\nfunction mapStateToProps({\n  assignments,\n  global\n}) {\n  return {\n    assignments,\n    global\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(AssignmentTemplates));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/assignments/AssignmentTemplates.jsx"],"names":["React","Component","withRouter","connect","actions","Assignment","HandleAssignment","PopupWithFunction","apiPostRequest","apiGetRequest","AssignmentLoader","LibraryAddOutlinedIcon","BtnWithTooltip","NoData","AssignmentTemplates","constructor","toggleHandleAssignment","status","assignment_to_edit","setState","handle_assignment","handleRemove","assignment_to_remove","close","remove","state","assignments_list","props","assignments","remove_loading","api","res","id","_id","ok","removeAssignment","setTimeout","create","assignment","system_text","global","loading","addAssignment","result","updateGlobalReducer","ASSIGNMENT_CREATE_SUCCESS","edit","updateAssignment","componentDidMount","setDataToAssignmentsReducer","assignments_loaded","render","REMOVE_TEXT","title","YES","NO","CREATE","length","map","m","Array","keys","NO_TEMPLATES","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../actions/actions\";\nimport Assignment from \"./parts/Assignment\";\nimport HandleAssignment from \"./parts/HandleAssignment\";\nimport PopupWithFunction from \"../../parts/PopupWithFunction\";\nimport { apiPostRequest, apiGetRequest } from \"../../tools/api\";\nimport AssignmentLoader from \"./parts/AssignmentLoader\";\nimport LibraryAddOutlinedIcon from '@material-ui/icons/LibraryAddOutlined';\nimport BtnWithTooltip from \"../../parts/BtnWithTooltip\";\nimport NoData from \"../../parts/NoData\";\n\nclass AssignmentTemplates extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  async componentDidMount() {\n    const api = `assignment`;\n    const res = await apiGetRequest(api);\n    if (res.ok) {\n      this.props.setDataToAssignmentsReducer(\"assignments_list\", res.result);\n      this.setState({\n        assignments_loaded: true,\n      });\n    }\n  }\n  toggleHandleAssignment = (status, assignment_to_edit) => {\n    this.setState({\n      handle_assignment: status,\n      assignment_to_edit,\n    });\n  };\n\n  handleRemove = (assignment_to_remove) => {\n    this.setState({\n      assignment_to_remove,\n    });\n  };\n\n  close = () => {\n    this.setState({\n      assignment_to_remove: \"\",\n      handle_assignment: \"\",\n    });\n  };\n  remove = async () => {\n    const { assignment_to_remove } = this.state;\n    const { assignments_list } = this.props.assignments;\n    this.setState({\n      remove_loading:true\n    })\n    const api = `assignment/delete`;\n    const res = await apiPostRequest(api, { id: assignment_to_remove._id });\n    if (res.ok) {\n      this.props.removeAssignment(assignment_to_remove, assignments_list);\n      this.close();\n    }\n   setTimeout(() => {\n    this.setState({\n      remove_loading:false\n    })\n   }, 400);\n  };\n\n  create = async (assignment) => {\n    const {system_text} = this.props.global\n    const { assignments_list } = this.props.assignments;\n    const api = \"assignment\";\n    this.setState({\n      loading: true,\n    });\n    const res = await apiPostRequest(api, assignment);\n\n    if (res.ok) {\n      this.props.addAssignment(res.result, assignments_list);\n    }\n    this.props.updateGlobalReducer(\n      \"success\",\n      system_text.ASSIGNMENT_CREATE_SUCCESS\n    );\n    this.setState({\n      loading: false,\n    });\n  };\n\n  edit = async (assignment) => {\n    const { assignments_list } = this.props.assignments;\n    const api = \"assignment\";\n    this.setState({\n      loading: true,\n    });\n    const res = await apiPostRequest(api, assignment);\n    if (res.ok) {\n      this.props.updateAssignment(res.result, assignments_list);\n    }\n    this.setState({\n      loading: false,\n    });\n  };\n\n  render() {\n    const { assignments_list } = this.props.assignments;\n    const {\n      handle_assignment,\n      assignment_to_edit,\n      assignment_to_remove,\n      loading,\n      assignments_loaded,\n      remove_loading\n    } = this.state;\n    const { system_text } = this.props.global;\n\n    return (\n      <div className=\"assignments flex__start\">\n        <PopupWithFunction\n          text={system_text.REMOVE_TEXT}\n          name={`${assignment_to_remove ? assignment_to_remove.title : \"\"}?`}\n          active={assignment_to_remove}\n          submit={this.remove}\n          close={this.close}\n          submit_text={system_text.YES}\n          close_text={system_text.NO}\n          loading ={remove_loading}\n        />\n        {handle_assignment ? (\n          <HandleAssignment\n            loading={loading}\n            edit={this.edit}\n            create={this.create}\n            assignment_to_edit={assignment_to_edit}\n            toggleHandleAssignment={this.toggleHandleAssignment}\n          />\n        ) : (\n          \" \"\n        )}\n          <BtnWithTooltip\n            svg={<LibraryAddOutlinedIcon />}\n            handleClick={() => this.toggleHandleAssignment(true)}\n            tooltip={system_text.CREATE}\n          />\n          <ul className=\"assignments__list flex__start\">\n            {assignments_loaded &&\n            assignments_list &&\n            assignments_list.length > 0 ? (\n              assignments_list.map((m) => {\n                return (\n                  <Assignment\n                    m={m}\n                    system_text = {system_text}\n                    handleRemove={this.handleRemove}\n                    toggleHandleAssignment={this.toggleHandleAssignment}\n                    key={m._id}\n                  />\n                );\n              })\n            ) : !assignments_loaded ? (\n              <AssignmentLoader arr={[...Array(3).keys()]} />\n            ) : (\n              <NoData \n              text = {system_text.NO_TEMPLATES}\n              />\n            )}\n          </ul>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ assignments, global }) {\n  return { assignments, global };\n}\n\nexport default withRouter(\n  connect(mapStateToProps, actions)(AssignmentTemplates)\n);\n"]},"metadata":{},"sourceType":"module"}