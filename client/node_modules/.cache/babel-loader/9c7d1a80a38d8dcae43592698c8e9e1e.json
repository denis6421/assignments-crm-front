{"ast":null,"code":"import _defineProperty from \"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/parts/AssignmentComments.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nconst saveContent = content => {\n  return JSON.stringify(convertToRaw(content.getCurrentContent()));\n};\n\nclass AssignmentComments extends Component {\n  constructor() {\n    super();\n\n    this.onEditorStateChange = val => {\n      this.setState({\n        comments: val\n      });\n    };\n\n    this.close = () => {\n      this.setState({\n        loaded: false\n      });\n      setTimeout(() => {\n        this.props.updateParentState(\"assignment_comments\");\n      }, 300);\n    };\n\n    this.save = async comments => {\n      const assignment = this.props.assignment;\n\n      const updated = _objectSpread({}, assignment);\n\n      const rawDraftContentState = await saveContent(comments);\n      updated[\"comments\"] = rawDraftContentState;\n      await this.props.updateAssignment(updated);\n      this.close();\n    };\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const assignment = this.props.assignment;\n    setTimeout(() => {\n      this.setState({\n        loaded: true\n      });\n    }, 20);\n    this.setState({\n      loaded: true\n    });\n    let comments = \"\";\n\n    if (assignment.comments) {\n      let content = convertFromRaw(JSON.parse(assignment.comments));\n      comments = EditorState.createWithContent(content);\n    }\n\n    this.setState({\n      comments\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          comments = _this$state.comments,\n          loaded = _this$state.loaded;\n    const _this$props = this.props,\n          assignment = _this$props.assignment,\n          system_text = _this$props.system_text;\n    return React.createElement(\"div\", {\n      id: loaded ? \"employee__assignment__comments--active\" : \"\",\n      className: \"employee__assignment__comments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      className: \"flex__column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, system_text.ASSIGNMENT), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"\".concat(assignment.title))), React.createElement(\"div\", {\n      className: \"employee__assignment__comments__editor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Editor, {\n      editorState: comments,\n      toolbarClassName: \"toolbarClassName\",\n      wrapperClassName: \"wrapperClassName\",\n      editorClassName: \"editorClassName\",\n      onEditorStateChange: this.onEditorStateChange,\n      placeholder: system_text.COMMENT,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })), React.createElement(\"aside\", {\n      className: \"employee__assignment__comments__btns flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      style: {\n        width: \"120px\"\n      },\n      onClick: () => this.save(comments),\n      className: \"save__btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, system_text.SAVE), React.createElement(\"button\", {\n      onClick: () => this.close(),\n      type: \"button\",\n      style: {\n        width: \"120px\"\n      },\n      className: \"cancel__btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, system_text.CANCEL))));\n  }\n\n}\n\nexport default AssignmentComments;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/parts/AssignmentComments.jsx"],"names":["React","Component","Editor","convertFromRaw","convertToRaw","EditorState","saveContent","content","JSON","stringify","getCurrentContent","AssignmentComments","constructor","onEditorStateChange","val","setState","comments","close","loaded","setTimeout","props","updateParentState","save","assignment","updated","rawDraftContentState","updateAssignment","state","componentDidMount","parse","createWithContent","render","system_text","ASSIGNMENT","title","COMMENT","width","SAVE","CANCEL"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nconst saveContent = (content) => {\n  return JSON.stringify(convertToRaw(content.getCurrentContent()));\n};\n\nclass AssignmentComments extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const { assignment } = this.props;\n    setTimeout(() => {\n      this.setState({\n        loaded: true,\n      });\n    }, 20);\n    this.setState({\n      loaded: true,\n    });\n    let comments = \"\";\n    if (assignment.comments) {\n      let content = convertFromRaw(JSON.parse(assignment.comments));\n\n      comments = EditorState.createWithContent(content);\n    }\n    this.setState({\n      comments,\n    });\n  }\n\n  onEditorStateChange = (val) => {\n    this.setState({\n      comments: val,\n    });\n  };\n\n  close = () => {\n    this.setState({\n      loaded: false,\n    });\n    setTimeout(() => {\n      this.props.updateParentState(\"assignment_comments\");\n    }, 300);\n  };\n\n  save = async (comments) => {\n    const { assignment } = this.props;\n    const updated = { ...assignment };\n    const rawDraftContentState = await saveContent(comments);\n    updated[\"comments\"] = rawDraftContentState;\n    await this.props.updateAssignment(updated);\n    this.close();\n  };\n\n  render() {\n    const { comments, loaded } = this.state;\n    const { assignment , system_text} = this.props;\n    return (\n      <div\n        id={loaded ? \"employee__assignment__comments--active\" : \"\"}\n        className=\"employee__assignment__comments\"\n      >\n        <section className=\"overlay\"></section>\n        <form className=\"flex__column\">\n          <header>\n    <h2>{system_text.ASSIGNMENT}</h2>\n            <h3>{`${assignment.title}`}</h3>\n          </header>\n          <div className=\"employee__assignment__comments__editor\">\n            <Editor\n              editorState={comments}\n              toolbarClassName=\"toolbarClassName\"\n              wrapperClassName=\"wrapperClassName\"\n              editorClassName=\"editorClassName\"\n              onEditorStateChange={this.onEditorStateChange}\n              placeholder={system_text.COMMENT}\n            />\n          </div>\n          <aside className=\"employee__assignment__comments__btns flex__start\">\n            <button\n              type=\"button\"\n              style={{\n                width: \"120px\",\n              }}\n              onClick={() => this.save(comments)}\n              className=\"save__btn\"\n            >\n              {system_text.SAVE}\n            </button>\n            <button\n              onClick={() => this.close()}\n              type=\"button\"\n              style={{\n                width: \"120px\",\n              }}\n              className=\"cancel__btn\"\n            >\n            {system_text.CANCEL}\n            </button>\n          </aside>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default AssignmentComments;\n"]},"metadata":{},"sourceType":"module"}