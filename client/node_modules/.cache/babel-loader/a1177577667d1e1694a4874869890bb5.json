{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import ElementActions from\"../../../parts/ElementActions\";import moment from\"moment\";import{connect}from\"react-redux\";import*as actions from\"../../../actions/actions\";import{withRouter}from\"react-router\";import{DELETE_ASSIGNMENTS}from\"../../settings/categories/permissions/Permissions_keys\";import{hasPermission}from\"../../../functions/permission_functions\";import{EMPLOYEE_ASSIGNMENT_ROUTE,EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE}from\"../../../tools/routes\";var EmployeeAssignment=/*#__PURE__*/function(_Component){_inherits(EmployeeAssignment,_Component);function EmployeeAssignment(){var _this;_classCallCheck(this,EmployeeAssignment);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmployeeAssignment).call(this));_this.changeStatus=function(val){var m=_this.props.m;console.log(m);var updated=_objectSpread({},m);updated[\"status\"]=val;_this.setState({hide:true});setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.createAndUpdateAssignment(updated);case 2:_this.setState({hide:false});case 3:case\"end\":return _context.stop();}}},_callee);})),500);};_this.goToAssignment=function(m){console.log(m);var user=_this.props.user.user;if(user.is_manager){_this.props.history.push(EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\",m.employee_id).replace(\":assignment_id\",m._id));}else{_this.props.history.push(EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\",user._id).replace(\":assignment_id\",m._id));}};_this.state={};return _this;}_createClass(EmployeeAssignment,[{key:\"render\",value:function render(){var m=this.props.m;console.log(m);var _this$props$user=this.props.user,permissions=_this$props$user.permissions,user=_this$props$user.user;var hide=this.state.hide;var options=[{text:\"VIEW\",function:this.goToAssignment,param1:m},{text:\"MARK_AS_PENDING\",function:this.changeStatus,param1:\"pending\"},{text:\"MARK_AS_DONE\",function:this.changeStatus,param1:\"done\"},{text:\"MARK_AS_PROGRESS\",function:this.changeStatus,param1:\"in_progress\"},{text:\"REMOVE\",function:this.props.handleDelete,param1:m,disabled:!hasPermission(user,permissions,DELETE_ASSIGNMENTS)}];options=options.filter(function(val){if(val.param1!==m.status)return val;});return React.createElement(\"li\",{id:hide?\"employee__page__assignment__hidden\":\"\",className:\"employee__page__assignment flex__start\"},React.createElement(\"div\",null,React.createElement(\"h4\",{style:{display:'none'}},\"Title\"),React.createElement(\"h3\",null,m.title)),React.createElement(\"div\",null,React.createElement(\"h4\",{style:{display:'none'}},\"Deadline\"),React.createElement(\"h3\",null,m.deadline?moment(m.deadline).format(\"DD/MM/YY\"):\"-\")),React.createElement(ElementActions,{width:\"150px\",options:options}));}}]);return EmployeeAssignment;}(Component);function mapStateToProps(_ref2){var user=_ref2.user;return{user:user};}export default withRouter(connect(mapStateToProps,actions)(EmployeeAssignment));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeAssignment.jsx"],"names":["React","Component","ElementActions","moment","connect","actions","withRouter","DELETE_ASSIGNMENTS","hasPermission","EMPLOYEE_ASSIGNMENT_ROUTE","EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE","EmployeeAssignment","changeStatus","val","m","props","console","log","updated","setState","hide","setTimeout","createAndUpdateAssignment","goToAssignment","user","is_manager","history","push","replace","employee_id","_id","state","permissions","options","text","function","param1","handleDelete","disabled","filter","status","display","title","deadline","format","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ElementActions from \"../../../parts/ElementActions\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport { DELETE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport {\n  EMPLOYEE_ASSIGNMENT_ROUTE,\n  EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE,\n} from \"../../../tools/routes\";\n\nclass EmployeeAssignment extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  changeStatus = (val) => {\n    const { m } = this.props;\n    console.log(m);\n    const updated = { ...m };\n    updated[\"status\"] = val;\n    this.setState({\n      hide: true,\n    });\n    setTimeout(async () => {\n      await this.props.createAndUpdateAssignment(updated);\n      this.setState({\n        hide: false,\n      });\n    }, 500);\n  };\n  goToAssignment = (m) => {\n    console.log(m);\n    const { user } = this.props.user;\n    if (user.is_manager) {\n      this.props.history.push(\n        EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\", m.employee_id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    } else {\n      this.props.history.push(\n        EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\", user._id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    }\n  };\n  render() {\n    const { m } = this.props;\n    console.log(m);\n    const { permissions, user } = this.props.user;\n    const { hide } = this.state;\n    let options = [\n      {\n        text: \"VIEW\",\n        function: this.goToAssignment,\n        param1: m,\n      },\n      {\n        text: \"MARK_AS_PENDING\",\n        function: this.changeStatus,\n        param1: \"pending\",\n      },\n      {\n        text: \"MARK_AS_DONE\",\n        function: this.changeStatus,\n        param1: \"done\",\n      },\n      {\n        text: \"MARK_AS_PROGRESS\",\n        function: this.changeStatus,\n        param1: \"in_progress\",\n      },\n      {\n        text: \"REMOVE\",\n        function: this.props.handleDelete,\n        param1: m,\n        disabled: !hasPermission(user, permissions, DELETE_ASSIGNMENTS),\n      },\n    ];\n    options = options.filter((val) => {\n      if (val.param1 !== m.status) return val;\n    });\n\n    return (\n      <li\n        id={hide ? \"employee__page__assignment__hidden\" : \"\"}\n        className=\"employee__page__assignment flex__start\"\n      >\n        <div>\n          <h4 style ={{\n            display:'none'\n          }}>Title</h4>\n          <h3>{m.title}</h3>\n        </div>\n        <div>\n          <h4\n          style ={{\n            display:'none'\n          }}\n          >Deadline</h4>\n          <h3>{m.deadline ? moment(m.deadline).format(\"DD/MM/YY\") : \"-\"}</h3>\n        </div>\n        <ElementActions width=\"150px\" options={options} />\n      </li>\n    );\n  }\n}\n\nfunction mapStateToProps({ user }) {\n  return { user };\n}\n\nexport default withRouter(\n  connect(mapStateToProps, actions)(EmployeeAssignment)\n);\n"]},"metadata":{},"sourceType":"module"}