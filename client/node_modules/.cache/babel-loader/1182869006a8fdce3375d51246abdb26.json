{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{BrowserRouter as Router,Route,Switch,withRouter}from\"react-router-dom\";import Navbar from\"../navbar/Navbar\";import{EMPLOYEE_DASHBOARD_PAGE_ROUTE,EMPLOYEE_DASHBOARD_SETTINGS}from\"../../tools/routes\";import EmployeePage from\"../employee-page/EmployeePage\";import Settings from\"../settings/Settings\";import{connect}from\"react-redux\";import*as actions from\"../../actions/actions\";import{employee_navigations}from\"../navbar/navigations\";import{apiGetRequest}from\"../../tools/api\";import{employee_settings}from\"../settings/settings_routes\";import{hasPermission}from\"../../functions/permission_functions\";import{EDIT_PROFILE}from\"../settings/categories/permissions/Permissions_keys\";var EmployeeDashboard=/*#__PURE__*/function(_Component){_inherits(EmployeeDashboard,_Component);function EmployeeDashboard(){var _this;_classCallCheck(this,EmployeeDashboard);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmployeeDashboard).call(this));_this.state={};return _this;}_createClass(EmployeeDashboard,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,api,res,navigations;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=this.props.user.user;api=\"account-settings?id=\".concat(user.user);_context.next=4;return apiGetRequest(api);case 4:res=_context.sent;if(res.ok){this.props.updateUserReducer(\"permissions\",res.result.permissions);navigations=employee_navigations;if(!hasPermission(user,res.result.permissions,EDIT_PROFILE)){navigations=navigations.filter(function(m){return m.value!==\"settings\";});}this.setState({navigations:navigations});}this.setState({page_loaded:true});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var user=this.props.user.user;var _this$state=this.state,navigations=_this$state.navigations,page_loaded=_this$state.page_loaded;return user&&navigations&&page_loaded?React.createElement(\"div\",{className:\"dashboard\"},React.createElement(Router,null,React.createElement(Navbar,{navigations:navigations}),React.createElement(Switch,null,React.createElement(Route,{path:EMPLOYEE_DASHBOARD_PAGE_ROUTE,render:function render(){return React.createElement(EmployeePage,null);}}),React.createElement(Route,{path:EMPLOYEE_DASHBOARD_SETTINGS,render:function render(){return React.createElement(Settings,{settings_routes:employee_settings});}})))):\"\";}}]);return EmployeeDashboard;}(Component);function mapStateToProps(_ref){var user=_ref.user;return{user:user};}export default withRouter(connect(mapStateToProps,actions)(EmployeeDashboard));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-dashboard/EmployeeDashboard.jsx"],"names":["React","Component","BrowserRouter","Router","Route","Switch","withRouter","Navbar","EMPLOYEE_DASHBOARD_PAGE_ROUTE","EMPLOYEE_DASHBOARD_SETTINGS","EmployeePage","Settings","connect","actions","employee_navigations","apiGetRequest","employee_settings","hasPermission","EDIT_PROFILE","EmployeeDashboard","state","user","props","api","res","ok","updateUserReducer","result","permissions","navigations","filter","m","value","setState","page_loaded","mapStateToProps"],"mappings":"qpCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,KAFF,CAGEC,MAHF,CAIEC,UAJF,KAKO,kBALP,CAMA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,OACEC,6BADF,CAEEC,2BAFF,KAGO,oBAHP,CAIA,MAAOC,CAAAA,YAAP,KAAyB,+BAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,uBAAzB,CACA,OAASC,oBAAT,KAAqC,uBAArC,CACA,OAASC,aAAT,KAA8B,iBAA9B,CACA,OAASC,iBAAT,KAAkC,6BAAlC,CACA,OAASC,aAAT,KAA8B,sCAA9B,CACA,OAASC,YAAT,KAA6B,qDAA7B,C,GAEMC,CAAAA,iB,2EACJ,4BAAc,mDACZ,qFACA,MAAKC,KAAL,CAAa,EAAb,CAFY,aAGb,C,yTAESC,I,CAAS,KAAKC,KAAL,CAAWD,I,CAApBA,I,CACFE,G,+BAA6BF,IAAI,CAACA,I,wBACtBN,CAAAA,aAAa,CAACQ,GAAD,C,QAAzBC,G,eACN,GAAIA,GAAG,CAACC,EAAR,CAAY,CACV,KAAKH,KAAL,CAAWI,iBAAX,CAA6B,aAA7B,CAA4CF,GAAG,CAACG,MAAJ,CAAWC,WAAvD,EACIC,WAFM,CAEQf,oBAFR,CAGV,GAAI,CAACG,aAAa,CAACI,IAAD,CAAOG,GAAG,CAACG,MAAJ,CAAWC,WAAlB,CAA+BV,YAA/B,CAAlB,CAAgE,CAC9DW,WAAW,CAAGA,WAAW,CAACC,MAAZ,CAAmB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,KAAF,GAAY,UAAnB,EAAnB,CAAd,CACD,CACD,KAAKC,QAAL,CAAc,CACZJ,WAAW,CAAXA,WADY,CAAd,EAGD,CACD,KAAKI,QAAL,CAAc,CACZC,WAAW,CAAC,IADA,CAAd,E,+MAIO,IACCb,CAAAA,IADD,CACU,KAAKC,KAAL,CAAWD,IADrB,CACCA,IADD,iBAE8B,KAAKD,KAFnC,CAECS,WAFD,aAECA,WAFD,CAEcK,WAFd,aAEcA,WAFd,CAIP,MAAOb,CAAAA,IAAI,EAAIQ,WAAR,EAAuBK,WAAvB,CACL,2BAAK,SAAS,CAAC,WAAf,EACE,oBAAC,MAAD,MACE,oBAAC,MAAD,EAAQ,WAAW,CAAEL,WAArB,EADF,CAEE,oBAAC,MAAD,MACE,oBAAC,KAAD,EAEE,IAAI,CAAErB,6BAFR,CAGE,MAAM,CAAE,wBAAM,qBAAC,YAAD,MAAN,EAHV,EADF,CAME,oBAAC,KAAD,EACE,IAAI,CAAEC,2BADR,CAEE,MAAM,CAAE,wBAAM,qBAAC,QAAD,EAAU,eAAe,CAAEO,iBAA3B,EAAN,EAFV,EANF,CAFF,CADF,CADK,CAkBL,EAlBF,CAoBD,C,+BA/C6Bf,S,EAkDhC,QAASkC,CAAAA,eAAT,MAAmC,IAARd,CAAAA,IAAQ,MAARA,IAAQ,CACjC,MAAO,CAAEA,IAAI,CAAJA,IAAF,CAAP,CACD,CAED,cAAef,CAAAA,UAAU,CAACM,OAAO,CAACuB,eAAD,CAAkBtB,OAAlB,CAAP,CAAkCM,iBAAlC,CAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  withRouter,\n} from \"react-router-dom\";\nimport Navbar from \"../navbar/Navbar\";\nimport {\n  EMPLOYEE_DASHBOARD_PAGE_ROUTE,\n  EMPLOYEE_DASHBOARD_SETTINGS,\n} from \"../../tools/routes\";\nimport EmployeePage from \"../employee-page/EmployeePage\";\nimport Settings from \"../settings/Settings\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../actions/actions\";\nimport { employee_navigations } from \"../navbar/navigations\";\nimport { apiGetRequest } from \"../../tools/api\";\nimport { employee_settings } from \"../settings/settings_routes\";\nimport { hasPermission } from \"../../functions/permission_functions\";\nimport { EDIT_PROFILE } from \"../settings/categories/permissions/Permissions_keys\";\n\nclass EmployeeDashboard extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n  async componentDidMount() {\n    const { user } = this.props.user;\n    const api = `account-settings?id=${user.user}`;\n    const res = await apiGetRequest(api);\n    if (res.ok) {\n      this.props.updateUserReducer(\"permissions\", res.result.permissions);\n      let navigations = employee_navigations;\n      if (!hasPermission(user, res.result.permissions, EDIT_PROFILE)) {\n        navigations = navigations.filter((m) => m.value !== \"settings\");\n      }\n      this.setState({\n        navigations,\n      });\n    }\n    this.setState({\n      page_loaded:true\n    })\n  }\n  render() {\n    const { user } = this.props.user;\n    const { navigations, page_loaded } = this.state;\n\n    return user && navigations && page_loaded? (\n      <div className=\"dashboard\">\n        <Router>\n          <Navbar navigations={navigations} />\n          <Switch>\n            <Route\n             \n              path={EMPLOYEE_DASHBOARD_PAGE_ROUTE}\n              render={() => <EmployeePage />}\n            />\n            <Route\n              path={EMPLOYEE_DASHBOARD_SETTINGS}\n              render={() => <Settings settings_routes={employee_settings} />}\n            />\n          </Switch>\n        </Router>\n      </div>\n    ) : (\n      \"\"\n    );\n  }\n}\n\nfunction mapStateToProps({ user }) {\n  return { user };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(EmployeeDashboard));\n"]},"metadata":{},"sourceType":"module"}