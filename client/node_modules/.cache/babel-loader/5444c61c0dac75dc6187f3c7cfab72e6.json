{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/todo/client/src/parts/inputs/DraftInput.jsx\";\nimport React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nclass DraftInput extends Component {\n  constructor() {\n    super();\n\n    this.onEditorStateChange = val => {\n      this.setState({\n        comments: val\n      });\n      window.clearTimeout(this.state.timeout);\n      const timeout = setTimeout(() => {\n        this.save(val);\n      }, 200);\n      this.setState({\n        timeout\n      });\n    };\n\n    this.saveContent = content => {\n      return JSON.stringify(convertToRaw(content.getCurrentContent()));\n    };\n\n    this.save = async comments => {\n      const property_name = this.props.property_name;\n      const rawDraftContentState = await this.saveContent(comments);\n      this.props.handleUpdate(property_name, rawDraftContentState);\n    };\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const value = this.props.value;\n    this.setState({\n      loaded: true\n    });\n    let comments = \"\";\n    console.log(value);\n\n    if (value) {\n      let content = convertFromRaw(JSON.parse(value));\n      comments = EditorState.createWithContent(content);\n    }\n\n    this.setState({\n      comments\n    });\n  }\n\n  render() {\n    const comments = this.state.comments;\n    const _this$props = this.props,\n          label = _this$props.label,\n          system_text = _this$props.system_text;\n    return React.createElement(\"div\", {\n      className: \"draft__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(Editor, {\n      editorState: comments,\n      toolbarClassName: \"toolbarClassName\",\n      wrapperClassName: \"wrapperClassName\",\n      editorClassName: \"editorClassName\",\n      onEditorStateChange: this.onEditorStateChange,\n      placeholder: system_text[label],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default DraftInput;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/client/src/parts/inputs/DraftInput.jsx"],"names":["React","Component","Editor","convertFromRaw","convertToRaw","EditorState","DraftInput","constructor","onEditorStateChange","val","setState","comments","window","clearTimeout","state","timeout","setTimeout","save","saveContent","content","JSON","stringify","getCurrentContent","property_name","props","rawDraftContentState","handleUpdate","componentDidMount","value","loaded","console","log","parse","createWithContent","render","label","system_text"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,OAAO,kDAAP;AACA,SAASC,cAAT,EAAyBC,YAAzB,EAAuCC,WAAvC,QAA0D,UAA1D;;AAEA,MAAMC,UAAN,SAAyBL,SAAzB,CAAmC;AACjCM,EAAAA,WAAW,GAAG;AACZ;;AADY,SAwBdC,mBAxBc,GAwBSC,GAAD,IAAS;AAC7B,WAAKC,QAAL,CAAc;AACZC,QAAAA,QAAQ,EAAEF;AADE,OAAd;AAGAG,MAAAA,MAAM,CAACC,YAAP,CAAoB,KAAKC,KAAL,CAAWC,OAA/B;AACA,YAAMA,OAAO,GAAGC,UAAU,CAAC,MAAM;AAC/B,aAAKC,IAAL,CAAUR,GAAV;AACD,OAFyB,EAEvB,GAFuB,CAA1B;AAGA,WAAKC,QAAL,CAAc;AACZK,QAAAA;AADY,OAAd;AAGD,KAnCa;;AAAA,SAoCdG,WApCc,GAoCCC,OAAD,IAAa;AACzB,aAAOC,IAAI,CAACC,SAAL,CAAejB,YAAY,CAACe,OAAO,CAACG,iBAAR,EAAD,CAA3B,CAAP;AACD,KAtCa;;AAAA,SAuCdL,IAvCc,GAuCP,MAAON,QAAP,IAAoB;AAAA,YACjBY,aADiB,GACC,KAAKC,KADN,CACjBD,aADiB;AAEzB,YAAME,oBAAoB,GAAG,MAAM,KAAKP,WAAL,CAAiBP,QAAjB,CAAnC;AACA,WAAKa,KAAL,CAAWE,YAAX,CAAwBH,aAAxB,EAAuCE,oBAAvC;AACD,KA3Ca;;AAEZ,SAAKX,KAAL,GAAa,EAAb;AACD;;AAEDa,EAAAA,iBAAiB,GAAG;AAAA,UACVC,KADU,GACA,KAAKJ,KADL,CACVI,KADU;AAElB,SAAKlB,QAAL,CAAc;AACZmB,MAAAA,MAAM,EAAE;AADI,KAAd;AAGA,QAAIlB,QAAQ,GAAG,EAAf;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;;AACA,QAAIA,KAAJ,EAAW;AACT,UAAIT,OAAO,GAAGhB,cAAc,CAACiB,IAAI,CAACY,KAAL,CAAWJ,KAAX,CAAD,CAA5B;AAEAjB,MAAAA,QAAQ,GAAGN,WAAW,CAAC4B,iBAAZ,CAA8Bd,OAA9B,CAAX;AACD;;AACD,SAAKT,QAAL,CAAc;AACZC,MAAAA;AADY,KAAd;AAKD;;AAuBDuB,EAAAA,MAAM,GAAG;AAAA,UACCvB,QADD,GACc,KAAKG,KADnB,CACCH,QADD;AAAA,wBAGwB,KAAKa,KAH7B;AAAA,UAGCW,KAHD,eAGCA,KAHD;AAAA,UAGQC,WAHR,eAGQA,WAHR;AAKP,WACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,WAAW,EAAEzB,QADf;AAEE,MAAA,gBAAgB,EAAC,kBAFnB;AAGE,MAAA,gBAAgB,EAAC,kBAHnB;AAIE,MAAA,eAAe,EAAC,iBAJlB;AAKE,MAAA,mBAAmB,EAAE,KAAKH,mBAL5B;AAME,MAAA,WAAW,EAAE4B,WAAW,CAACD,KAAD,CAN1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAYD;;AA/DgC;;AAkEnC,eAAe7B,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nclass DraftInput extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const { value } = this.props;\n    this.setState({\n      loaded: true,\n    });\n    let comments = \"\";\n    console.log(value);\n    if (value) {\n      let content = convertFromRaw(JSON.parse(value));\n\n      comments = EditorState.createWithContent(content);\n    }\n    this.setState({\n      comments,\n    });\n\n    \n  }\n\n  onEditorStateChange = (val) => {\n    this.setState({\n      comments: val,\n    });\n    window.clearTimeout(this.state.timeout);\n    const timeout = setTimeout(() => {\n      this.save(val);\n    }, 200);\n    this.setState({\n      timeout,\n    });\n  };\n  saveContent = (content) => {\n    return JSON.stringify(convertToRaw(content.getCurrentContent()));\n  };\n  save = async (comments) => {\n    const { property_name } = this.props;\n    const rawDraftContentState = await this.saveContent(comments);\n    this.props.handleUpdate(property_name, rawDraftContentState);\n  };\n\n  render() {\n    const { comments } = this.state;\n\n    const { label, system_text } = this.props;\n\n    return (\n      <div className=\"draft__content\">\n        <Editor\n          editorState={comments}\n          toolbarClassName=\"toolbarClassName\"\n          wrapperClassName=\"wrapperClassName\"\n          editorClassName=\"editorClassName\"\n          onEditorStateChange={this.onEditorStateChange}\n          placeholder={system_text[label]}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DraftInput;\n"]},"metadata":{},"sourceType":"module"}