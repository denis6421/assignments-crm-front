{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import ElementActions from\"../../../parts/ElementActions\";import moment from\"moment\";import{connect}from\"react-redux\";import*as actions from\"../../../actions/actions\";import{withRouter}from\"react-router\";import{DELETE_ASSIGNMENTS}from\"../../settings/categories/permissions/Permissions_keys\";import{hasPermission}from\"../../../functions/permission_functions\";import{EMPLOYEE_ASSIGNMENT_ROUTE,EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE,PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT}from\"../../../tools/routes\";import\"moment/locale/he\";var EmployeeAssignment=/*#__PURE__*/function(_Component){_inherits(EmployeeAssignment,_Component);function EmployeeAssignment(){var _this;_classCallCheck(this,EmployeeAssignment);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmployeeAssignment).call(this));_this.changeStatus=function(val){var m=_this.props.m;console.log(m);var updated=_objectSpread({},m);updated[\"status\"]=val;_this.setState({hide:true});setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.createAndUpdateAssignment(updated);case 2:_this.setState({hide:false});case 3:case\"end\":return _context.stop();}}},_callee);})),500);};_this.goToAssignment=function(m){var manager_assignments=_this.props.manager_assignments;var user=_this.props.user.user;if(manager_assignments){_this.props.history.push(PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT.replace(\":assignment_id\",m._id));}else if(user.is_manager){_this.props.history.push(EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\",m.employee_id).replace(\":assignment_id\",m._id));}else{_this.props.history.push(EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\",user._id).replace(\":assignment_id\",m._id));}};_this.state={};return _this;}_createClass(EmployeeAssignment,[{key:\"render\",value:function render(){var m=this.props.m;var _this$props$user=this.props.user,permissions=_this$props$user.permissions,user=_this$props$user.user;var hide=this.state.hide;var language=this.props.global.language;var options=[{text:\"VIEW\",function:this.goToAssignment,param1:m},{text:\"MARK_AS_PENDING\",function:this.changeStatus,param1:\"pending\"},{text:\"MARK_AS_DONE\",function:this.changeStatus,param1:\"done\"},{text:\"MARK_AS_PROGRESS\",function:this.changeStatus,param1:\"in_progress\"},{text:\"REMOVE\",function:this.props.handleDelete,param1:m,disabled:!hasPermission(user,permissions,DELETE_ASSIGNMENTS)}];options=options.filter(function(val){if(val.param1!==m.status)return val;});return React.createElement(\"li\",{id:hide?\"employee__page__assignment__hidden\":\"\",className:\"employee__page__assignment flex__start\"},React.createElement(\"div\",null,React.createElement(\"h4\",{style:{display:'none'}},\"Title\"),React.createElement(\"h3\",null,m.title)),React.createElement(\"div\",null,React.createElement(\"h4\",{style:{display:'none'}},\"Deadline\"),React.createElement(\"h3\",null,m.deadline?moment(m.deadline).locale(language.substring(0,2)).format(\"ddd, LL\"):\"-\")),React.createElement(ElementActions,{width:\"150px\",options:options}));}}]);return EmployeeAssignment;}(Component);function mapStateToProps(_ref2){var user=_ref2.user,global=_ref2.global;return{user:user,global:global};}export default withRouter(connect(mapStateToProps,actions)(EmployeeAssignment));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/employee-assignments/EmployeeAssignment.jsx"],"names":["React","Component","ElementActions","moment","connect","actions","withRouter","DELETE_ASSIGNMENTS","hasPermission","EMPLOYEE_ASSIGNMENT_ROUTE","EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE","PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT","EmployeeAssignment","changeStatus","val","m","props","console","log","updated","setState","hide","setTimeout","createAndUpdateAssignment","goToAssignment","manager_assignments","user","history","push","replace","_id","is_manager","employee_id","state","permissions","language","global","options","text","function","param1","handleDelete","disabled","filter","status","display","title","deadline","locale","substring","format","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ElementActions from \"../../../parts/ElementActions\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport { withRouter } from \"react-router\";\nimport { DELETE_ASSIGNMENTS } from \"../../settings/categories/permissions/Permissions_keys\";\nimport { hasPermission } from \"../../../functions/permission_functions\";\nimport {\n  EMPLOYEE_ASSIGNMENT_ROUTE,\n  EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE,\n  PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT,\n} from \"../../../tools/routes\";\nimport \"moment/locale/he\";\n\n\n\nclass EmployeeAssignment extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  changeStatus = (val) => {\n    const { m } = this.props;\n    console.log(m);\n    const updated = { ...m };\n    updated[\"status\"] = val;\n    this.setState({\n      hide: true,\n    });\n    setTimeout(async () => {\n      await this.props.createAndUpdateAssignment(updated);\n      this.setState({\n        hide: false,\n      });\n    }, 500);\n  };\n  goToAssignment = (m) => {\n  const {manager_assignments} = this.props\n \n    const { user } = this.props.user;\n    if(manager_assignments){\n      this.props.history.push(\n        PERSONAL_ASSIGNMENTS_ROUTE_ASSIGNMENT.replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    }\n    else if ( user.is_manager) {\n      this.props.history.push(\n        EMPLOYEE_ASSIGNMENT_ROUTE.replace(\":id\", m.employee_id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    } else {\n      this.props.history.push(\n        EMPLOYEE_DASHBOARD_ASSIGNMENT_ROUTE.replace(\":id\", user._id).replace(\n          \":assignment_id\",\n          m._id\n        )\n      );\n    }\n  };\n  render() {\n    const { m } = this.props;\n    const { permissions, user } = this.props.user;\n    const { hide } = this.state;\n    const {language} = this.props.global;\n    let options = [\n      {\n        text: \"VIEW\",\n        function: this.goToAssignment,\n        param1: m,\n      },\n      {\n        text: \"MARK_AS_PENDING\",\n        function: this.changeStatus,\n        param1: \"pending\",\n      },\n      {\n        text: \"MARK_AS_DONE\",\n        function: this.changeStatus,\n        param1: \"done\",\n      },\n      {\n        text: \"MARK_AS_PROGRESS\",\n        function: this.changeStatus,\n        param1: \"in_progress\",\n      },\n      {\n        text: \"REMOVE\",\n        function: this.props.handleDelete,\n        param1: m,\n        disabled: !hasPermission(user, permissions, DELETE_ASSIGNMENTS),\n      },\n    ];\n\n\n    options = options.filter((val) => {\n      if (val.param1 !== m.status) return val;\n    });\n\n    return (\n  <li\n        id={hide ? \"employee__page__assignment__hidden\" : \"\"}\n        className=\"employee__page__assignment flex__start\"\n      >\n        <div>\n          <h4 style ={{\n            display:'none'\n          }}>Title</h4>\n          <h3>{m.title}</h3>\n        </div>\n        <div>\n          <h4\n          style ={{\n            display:'none'\n          }}\n          >Deadline</h4>\n          <h3>{m.deadline ? moment(m.deadline)\n                    .locale(language.substring(0, 2))\n                    .format(\"ddd, LL\") : \"-\"}</h3>\n        </div>\n        <ElementActions width=\"150px\" options={options} />\n      </li> \n    );\n  }\n}\n\nfunction mapStateToProps({ user,global }) {\n  return { user,global };\n}\n\nexport default withRouter(\n  connect(mapStateToProps, actions)(EmployeeAssignment)\n);\n"]},"metadata":{},"sourceType":"module"}