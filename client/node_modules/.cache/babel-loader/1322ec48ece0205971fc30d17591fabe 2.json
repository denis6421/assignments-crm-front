{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import{Editor}from\"react-draft-wysiwyg\";import\"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";import{convertFromRaw,convertToRaw,EditorState}from\"draft-js\";var saveContent=function saveContent(content){return JSON.stringify(convertToRaw(content.getCurrentContent()));};var AssignmentComments=/*#__PURE__*/function(_Component){_inherits(AssignmentComments,_Component);function AssignmentComments(){var _this;_classCallCheck(this,AssignmentComments);_this=_possibleConstructorReturn(this,_getPrototypeOf(AssignmentComments).call(this));_this.onEditorStateChange=function(val){_this.setState({comments:val});};_this.close=function(){_this.setState({loaded:false});setTimeout(function(){_this.props.updateParentState(\"assignment_comments\");},300);};_this.save=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(comments){var assignment,updated,rawDraftContentState;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:assignment=_this.props.assignment;updated=_objectSpread({},assignment);_context.next=4;return saveContent(comments);case 4:rawDraftContentState=_context.sent;updated[\"comments\"]=rawDraftContentState;_context.next=8;return _this.props.updateAssignment(updated);case 8:_this.close();case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={};return _this;}_createClass(AssignmentComments,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var assignment=this.props.assignment;setTimeout(function(){_this2.setState({loaded:true});},20);this.setState({loaded:true});var comments=\"\";if(assignment.comments){var content=convertFromRaw(JSON.parse(assignment.comments));comments=EditorState.createWithContent(content);}this.setState({comments:comments});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,comments=_this$state.comments,loaded=_this$state.loaded;var _this$props=this.props,assignment=_this$props.assignment,system_text=_this$props.system_text;return React.createElement(\"div\",{id:loaded?\"employee__assignment__comments--active\":\"\",className:\"employee__assignment__comments\"},React.createElement(\"section\",{className:\"overlay\"}),React.createElement(\"form\",{className:\"flex__column\"},React.createElement(\"header\",null,React.createElement(\"h2\",null,system_text.ASSIGNMENT),React.createElement(\"h3\",null,\"\".concat(assignment.title))),React.createElement(\"div\",{className:\"employee__assignment__comments__editor\"},React.createElement(Editor,{editorState:comments,toolbarClassName:\"toolbarClassName\",wrapperClassName:\"wrapperClassName\",editorClassName:\"editorClassName\",onEditorStateChange:this.onEditorStateChange,placeholder:system_text.COMMENT})),React.createElement(\"aside\",{className:\"employee__assignment__comments__btns flex__start\"},React.createElement(\"button\",{type:\"button\",style:{width:\"120px\"},onClick:function onClick(){return _this3.save(comments);},className:\"save__btn\"},system_text.SAVE),React.createElement(\"button\",{onClick:function onClick(){return _this3.close();},type:\"button\",style:{width:\"120px\"},className:\"cancel__btn\"},system_text.CANCEL))));}}]);return AssignmentComments;}(Component);export default AssignmentComments;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employee-page/parts/AssignmentComments.jsx"],"names":["React","Component","Editor","convertFromRaw","convertToRaw","EditorState","saveContent","content","JSON","stringify","getCurrentContent","AssignmentComments","onEditorStateChange","val","setState","comments","close","loaded","setTimeout","props","updateParentState","save","assignment","updated","rawDraftContentState","updateAssignment","state","parse","createWithContent","system_text","ASSIGNMENT","title","COMMENT","width","SAVE","CANCEL"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nconst saveContent = (content) => {\n  return JSON.stringify(convertToRaw(content.getCurrentContent()));\n};\n\nclass AssignmentComments extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const { assignment } = this.props;\n    setTimeout(() => {\n      this.setState({\n        loaded: true,\n      });\n    }, 20);\n    this.setState({\n      loaded: true,\n    });\n    let comments = \"\";\n    if (assignment.comments) {\n      let content = convertFromRaw(JSON.parse(assignment.comments));\n\n      comments = EditorState.createWithContent(content);\n    }\n    this.setState({\n      comments,\n    });\n  }\n\n  onEditorStateChange = (val) => {\n    this.setState({\n      comments: val,\n    });\n  };\n\n  close = () => {\n    this.setState({\n      loaded: false,\n    });\n    setTimeout(() => {\n      this.props.updateParentState(\"assignment_comments\");\n    }, 300);\n  };\n\n  save = async (comments) => {\n    const { assignment } = this.props;\n    const updated = { ...assignment };\n    const rawDraftContentState = await saveContent(comments);\n    updated[\"comments\"] = rawDraftContentState;\n    await this.props.updateAssignment(updated);\n    this.close();\n  };\n\n  render() {\n    const { comments, loaded } = this.state;\n    const { assignment , system_text} = this.props;\n    return (\n      <div\n        id={loaded ? \"employee__assignment__comments--active\" : \"\"}\n        className=\"employee__assignment__comments\"\n      >\n        <section className=\"overlay\"></section>\n        <form className=\"flex__column\">\n          <header>\n    <h2>{system_text.ASSIGNMENT}</h2>\n            <h3>{`${assignment.title}`}</h3>\n          </header>\n          <div className=\"employee__assignment__comments__editor\">\n            <Editor\n              editorState={comments}\n              toolbarClassName=\"toolbarClassName\"\n              wrapperClassName=\"wrapperClassName\"\n              editorClassName=\"editorClassName\"\n              onEditorStateChange={this.onEditorStateChange}\n              placeholder={system_text.COMMENT}\n            />\n          </div>\n          <aside className=\"employee__assignment__comments__btns flex__start\">\n            <button\n              type=\"button\"\n              style={{\n                width: \"120px\",\n              }}\n              onClick={() => this.save(comments)}\n              className=\"save__btn\"\n            >\n              {system_text.SAVE}\n            </button>\n            <button\n              onClick={() => this.close()}\n              type=\"button\"\n              style={{\n                width: \"120px\",\n              }}\n              className=\"cancel__btn\"\n            >\n            {system_text.CANCEL}\n            </button>\n          </aside>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default AssignmentComments;\n"]},"metadata":{},"sourceType":"module"}