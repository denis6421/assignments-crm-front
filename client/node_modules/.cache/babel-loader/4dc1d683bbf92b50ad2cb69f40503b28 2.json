{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/todo/front/client/src/parts/inputs/DraftInput.jsx\";\nimport React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nclass DraftInput extends Component {\n  constructor() {\n    super();\n\n    this.createContent = value => {\n      let comments = \"\";\n\n      if (value) {\n        let content = convertFromRaw(JSON.parse(value));\n        comments = EditorState.createWithContent(content);\n      }\n\n      this.setState({\n        comments\n      });\n    };\n\n    this.onEditorStateChange = val => {\n      this.setState({\n        comments: val\n      });\n      window.clearTimeout(this.state.timeout);\n      const timeout = setTimeout(() => {\n        this.save(val);\n      }, 200);\n      this.setState({\n        timeout\n      });\n    };\n\n    this.saveContent = content => {\n      return JSON.stringify(convertToRaw(content.getCurrentContent()));\n    };\n\n    this.save = async comments => {\n      const property_name = this.props.property_name;\n      const rawDraftContentState = await this.saveContent(comments);\n      this.props.handleUpdate(property_name, rawDraftContentState);\n    };\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const value = this.props.value;\n    this.setState({\n      loaded: true\n    });\n    this.createContent(value);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.updated !== this.props.updated) {\n      this.createContent(nextProps.value);\n    }\n  }\n\n  render() {\n    const comments = this.state.comments;\n    const _this$props = this.props,\n          label = _this$props.label,\n          system_text = _this$props.system_text;\n    return React.createElement(\"div\", {\n      className: \"draft__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Editor, {\n      editorState: comments,\n      toolbarClassName: \"toolbarClassName\",\n      wrapperClassName: \"wrapperClassName\",\n      editorClassName: \"editorClassName\",\n      onEditorStateChange: this.onEditorStateChange,\n      placeholder: system_text[label],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default DraftInput;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/parts/inputs/DraftInput.jsx"],"names":["React","Component","Editor","convertFromRaw","convertToRaw","EditorState","DraftInput","constructor","createContent","value","comments","content","JSON","parse","createWithContent","setState","onEditorStateChange","val","window","clearTimeout","state","timeout","setTimeout","save","saveContent","stringify","getCurrentContent","property_name","props","rawDraftContentState","handleUpdate","componentDidMount","loaded","componentWillReceiveProps","nextProps","updated","render","label","system_text"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,OAAO,kDAAP;AACA,SAASC,cAAT,EAAyBC,YAAzB,EAAuCC,WAAvC,QAA0D,UAA1D;;AAEA,MAAMC,UAAN,SAAyBL,SAAzB,CAAmC;AACjCM,EAAAA,WAAW,GAAG;AACZ;;AADY,SAkBdC,aAlBc,GAkBGC,KAAD,IAAU;AACxB,UAAIC,QAAQ,GAAG,EAAf;;AACA,UAAID,KAAJ,EAAW;AACT,YAAIE,OAAO,GAAGR,cAAc,CAACS,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAD,CAA5B;AAEAC,QAAAA,QAAQ,GAAGL,WAAW,CAACS,iBAAZ,CAA8BH,OAA9B,CAAX;AACD;;AACD,WAAKI,QAAL,CAAc;AACZL,QAAAA;AADY,OAAd;AAGD,KA5Ba;;AAAA,SA8BdM,mBA9Bc,GA8BSC,GAAD,IAAS;AAC7B,WAAKF,QAAL,CAAc;AACZL,QAAAA,QAAQ,EAAEO;AADE,OAAd;AAGAC,MAAAA,MAAM,CAACC,YAAP,CAAoB,KAAKC,KAAL,CAAWC,OAA/B;AACA,YAAMA,OAAO,GAAGC,UAAU,CAAC,MAAM;AAC/B,aAAKC,IAAL,CAAUN,GAAV;AACD,OAFyB,EAEvB,GAFuB,CAA1B;AAGA,WAAKF,QAAL,CAAc;AACZM,QAAAA;AADY,OAAd;AAGD,KAzCa;;AAAA,SA0CdG,WA1Cc,GA0CCb,OAAD,IAAa;AACzB,aAAOC,IAAI,CAACa,SAAL,CAAerB,YAAY,CAACO,OAAO,CAACe,iBAAR,EAAD,CAA3B,CAAP;AACD,KA5Ca;;AAAA,SA6CdH,IA7Cc,GA6CP,MAAOb,QAAP,IAAoB;AAAA,YACjBiB,aADiB,GACC,KAAKC,KADN,CACjBD,aADiB;AAEzB,YAAME,oBAAoB,GAAG,MAAM,KAAKL,WAAL,CAAiBd,QAAjB,CAAnC;AACA,WAAKkB,KAAL,CAAWE,YAAX,CAAwBH,aAAxB,EAAuCE,oBAAvC;AACD,KAjDa;;AAEZ,SAAKT,KAAL,GAAa,EAAb;AACD;;AAEDW,EAAAA,iBAAiB,GAAG;AAAA,UACVtB,KADU,GACA,KAAKmB,KADL,CACVnB,KADU;AAElB,SAAKM,QAAL,CAAc;AACZiB,MAAAA,MAAM,EAAE;AADI,KAAd;AAGA,SAAKxB,aAAL,CAAmBC,KAAnB;AACD;;AACDwB,EAAAA,yBAAyB,CAACC,SAAD,EAAW;AAClC,QAAGA,SAAS,CAACC,OAAV,KAAsB,KAAKP,KAAL,CAAWO,OAApC,EAA4C;AAC1C,WAAK3B,aAAL,CAAmB0B,SAAS,CAACzB,KAA7B;AACD;AACF;;AAmCD2B,EAAAA,MAAM,GAAG;AAAA,UACC1B,QADD,GACc,KAAKU,KADnB,CACCV,QADD;AAAA,wBAGwB,KAAKkB,KAH7B;AAAA,UAGCS,KAHD,eAGCA,KAHD;AAAA,UAGQC,WAHR,eAGQA,WAHR;AAKP,WACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,WAAW,EAAE5B,QADf;AAEE,MAAA,gBAAgB,EAAC,kBAFnB;AAGE,MAAA,gBAAgB,EAAC,kBAHnB;AAIE,MAAA,eAAe,EAAC,iBAJlB;AAKE,MAAA,mBAAmB,EAAE,KAAKM,mBAL5B;AAME,MAAA,WAAW,EAAEsB,WAAW,CAACD,KAAD,CAN1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAYD;;AArEgC;;AAwEnC,eAAe/B,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { convertFromRaw, convertToRaw, EditorState } from \"draft-js\";\n\nclass DraftInput extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const { value } = this.props;\n    this.setState({\n      loaded: true,\n    });\n    this.createContent(value)\n  }\n  componentWillReceiveProps(nextProps){\n    if(nextProps.updated !== this.props.updated){\n      this.createContent(nextProps.value)\n    }\n  }\n\n  createContent = (value) =>{\n    let comments = \"\";\n    if (value) {\n      let content = convertFromRaw(JSON.parse(value));\n\n      comments = EditorState.createWithContent(content);\n    }\n    this.setState({\n      comments,\n    });\n  }\n\n  onEditorStateChange = (val) => {\n    this.setState({\n      comments: val,\n    });\n    window.clearTimeout(this.state.timeout);\n    const timeout = setTimeout(() => {\n      this.save(val);\n    }, 200);\n    this.setState({\n      timeout,\n    });\n  };\n  saveContent = (content) => {\n    return JSON.stringify(convertToRaw(content.getCurrentContent()));\n  };\n  save = async (comments) => {\n    const { property_name } = this.props;\n    const rawDraftContentState = await this.saveContent(comments);\n    this.props.handleUpdate(property_name, rawDraftContentState);\n  };\n\n  render() {\n    const { comments } = this.state;\n\n    const { label, system_text } = this.props;\n\n    return (\n      <div className=\"draft__content\">\n        <Editor\n          editorState={comments}\n          toolbarClassName=\"toolbarClassName\"\n          wrapperClassName=\"wrapperClassName\"\n          editorClassName=\"editorClassName\"\n          onEditorStateChange={this.onEditorStateChange}\n          placeholder={system_text[label]}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DraftInput;\n"]},"metadata":{},"sourceType":"module"}