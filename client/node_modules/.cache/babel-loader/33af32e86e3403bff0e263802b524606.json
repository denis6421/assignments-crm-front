{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Dropzone from\"react-dropzone\";import AddIcon from\"@material-ui/icons/Add\";import{connect}from\"react-redux\";import*as actions from\"../../actions/actions\";import Backendless from\"backendless\";import AddPhotoAlternateOutlinedIcon from\"@material-ui/icons/AddPhotoAlternateOutlined\";import SmallLoader from\"../SmallLoader\";Backendless.initApp(\"0C7F99A6-3715-126A-FF3C-3387261D5C00\",\"957C469D-E5DE-4C1D-8A8B-A3BE62BF1CD2\");var Upload=/*#__PURE__*/function(_Component){_inherits(Upload,_Component);function Upload(){var _this;_classCallCheck(this,Upload);_this=_possibleConstructorReturn(this,_getPrototypeOf(Upload).call(this));_this.handleFileSelect=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(files){var property_name,file;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:property_name=_this.props.property_name;file=files[0];_this.setState({loading:true,image_loaded:false});_context.prev=3;_context.next=6;return Backendless.Files.upload(file,\"/myFiles\",true).then(function(result){var url=result.fileURL;_this.props.update(property_name,url);_this.setState({loading:false});});case 6:_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](3);_context.next=12;return _this.props.updateGlobalReducer(\"error\",\"Failed to change profile image\");case 12:case\"end\":return _context.stop();}}},_callee,null,[[3,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onLoad=function(){_this.setState({image_loaded:true});};_this.state={is_drag:false};return _this;}_createClass(Upload,[{key:\"render\",value:function render(){var _this2=this;var value=this.props.value;var _this$state=this.state,image_loaded=_this$state.image_loaded,loading=_this$state.loading;return React.createElement(\"div\",{className:\"uploader\"},React.createElement(Dropzone,{style:{width:\"100%\",height:\"100%\"},onDrop:function onDrop(acceptedFiles){return _this2.handleFileSelect(acceptedFiles);}}),value?React.createElement(React.Fragment,null,React.createElement(\"img\",{className:\"uploader__img\",onLoad:function onLoad(){return _this2.onLoad();},style:{opacity:!loading&&image_loaded?1:0,transition:\"0.3s all\"},src:value,alt:\"\"}),loading||!image_loaded?React.createElement(SmallLoader,{active:true}):''):React.createElement(AddPhotoAlternateOutlinedIcon,null));}}]);return Upload;}(Component);function mapStateToProps(_ref2){var global=_ref2.global;return{global:global};}export default connect(mapStateToProps,actions)(Upload);","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/parts/uploader/Uploader.jsx"],"names":["React","Component","Dropzone","AddIcon","connect","actions","Backendless","AddPhotoAlternateOutlinedIcon","SmallLoader","initApp","Upload","handleFileSelect","files","property_name","props","file","setState","loading","image_loaded","Files","upload","then","result","url","fileURL","update","updateGlobalReducer","onLoad","state","is_drag","value","width","height","acceptedFiles","opacity","transition","mapStateToProps","global"],"mappings":"qpCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,uBAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,aAAxB,CACA,MAAOC,CAAAA,6BAAP,KAA0C,8CAA1C,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CAEAF,WAAW,CAACG,OAAZ,CACE,sCADF,CAEE,sCAFF,E,GAKMC,CAAAA,M,gEACJ,iBAAc,wCACZ,0EADY,MAMdC,gBANc,0FAMK,iBAAOC,KAAP,yIACTC,aADS,CACS,MAAKC,KADd,CACTD,aADS,CAEbE,IAFa,CAENH,KAAK,CAAC,CAAD,CAFC,CAGjB,MAAKI,QAAL,CAAc,CACZC,OAAO,CAAC,IADI,CAEZC,YAAY,CAAC,KAFD,CAAd,EAHiB,sCAQTZ,CAAAA,WAAW,CAACa,KAAZ,CAAkBC,MAAlB,CAAyBL,IAAzB,CAA+B,UAA/B,CAA2C,IAA3C,EAAiDM,IAAjD,CAAsD,SAACC,MAAD,CAAY,CACtE,GAAIC,CAAAA,GAAG,CAAGD,MAAM,CAACE,OAAjB,CACA,MAAKV,KAAL,CAAWW,MAAX,CAAkBZ,aAAlB,CAAiCU,GAAjC,EACA,MAAKP,QAAL,CAAc,CACZC,OAAO,CAAC,KADI,CAAd,EAGD,CANK,CARS,8GAiBT,OAAKH,KAAL,CAAWY,mBAAX,CAA+B,OAA/B,CAAwC,gCAAxC,CAjBS,qEANL,qEA6BdC,MA7Bc,CA6BL,UAAM,CACb,MAAKX,QAAL,CAAc,CACZE,YAAY,CAAE,IADF,CAAd,EAGD,CAjCa,CAEZ,MAAKU,KAAL,CAAa,CACXC,OAAO,CAAE,KADE,CAAb,CAFY,aAKb,C,0DA6BQ,oBACCC,CAAAA,KADD,CACW,KAAKhB,KADhB,CACCgB,KADD,iBAE2B,KAAKF,KAFhC,CAECV,YAFD,aAECA,YAFD,CAEeD,OAFf,aAEeA,OAFf,CAKP,MACE,4BAAK,SAAS,CAAC,UAAf,EACE,oBAAC,QAAD,EACE,KAAK,CAAE,CAAEc,KAAK,CAAE,MAAT,CAAiBC,MAAM,CAAE,MAAzB,CADT,CAEE,MAAM,CAAE,gBAACC,aAAD,QAAmB,CAAA,MAAI,CAACtB,gBAAL,CAAsBsB,aAAtB,CAAnB,EAFV,EADF,CAKGH,KAAK,CACJ,wCACE,2BACE,SAAS,CAAC,eADZ,CAEE,MAAM,CAAE,wBAAM,CAAA,MAAI,CAACH,MAAL,EAAN,EAFV,CAGE,KAAK,CAAE,CACLO,OAAO,CAAE,CAACjB,OAAD,EAAYC,YAAZ,CAA2B,CAA3B,CAA+B,CADnC,CAELiB,UAAU,CAAE,UAFP,CAHT,CAOE,GAAG,CAAEL,KAPP,CAQE,GAAG,CAAC,EARN,EADF,CAWGb,OAAO,EAAI,CAACC,YAAZ,CAA2B,oBAAC,WAAD,EAAa,MAAM,CAAI,IAAvB,EAA3B,CAA4D,EAX/D,CADI,CAeJ,oBAAC,6BAAD,MApBJ,CADF,CAyBD,C,oBAjEkBjB,S,EAmErB,QAASmC,CAAAA,eAAT,OAAqC,IAAVC,CAAAA,MAAU,OAAVA,MAAU,CACnC,MAAO,CAAEA,MAAM,CAANA,MAAF,CAAP,CACD,CAED,cAAejC,CAAAA,OAAO,CAACgC,eAAD,CAAkB/B,OAAlB,CAAP,CAAkCK,MAAlC,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../actions/actions\";\nimport Backendless from \"backendless\";\nimport AddPhotoAlternateOutlinedIcon from \"@material-ui/icons/AddPhotoAlternateOutlined\";\nimport SmallLoader from \"../SmallLoader\";\n\nBackendless.initApp(\n  \"0C7F99A6-3715-126A-FF3C-3387261D5C00\",\n  \"957C469D-E5DE-4C1D-8A8B-A3BE62BF1CD2\"\n);\n\nclass Upload extends Component {\n  constructor() {\n    super();\n    this.state = {\n      is_drag: false,\n    };\n  }\n  handleFileSelect = async (files) => {\n    const { property_name } = this.props;\n    let file = files[0];\n    this.setState({\n      loading:true,\n      image_loaded:false\n    })\n    try {\n      await Backendless.Files.upload(file, \"/myFiles\", true).then((result) => {\n        let url = result.fileURL;\n        this.props.update(property_name, url);\n        this.setState({\n          loading:false\n        })\n      });\n     \n    } catch (error) {\n      await this.props.updateGlobalReducer(\"error\", \"Failed to change profile image\");\n      \n    }\n  \n  };\n\n  onLoad = () => {\n    this.setState({\n      image_loaded: true,\n    });\n  };\n  render() {\n    const { value } = this.props;\n    const { image_loaded, loading } = this.state;\n\n   \n    return (\n      <div className=\"uploader\">\n        <Dropzone\n          style={{ width: \"100%\", height: \"100%\" }}\n          onDrop={(acceptedFiles) => this.handleFileSelect(acceptedFiles)}\n        ></Dropzone>\n        {value ? (\n          <>\n            <img\n              className=\"uploader__img\"\n              onLoad={() => this.onLoad()}\n              style={{\n                opacity: !loading && image_loaded ? 1 : 0,\n                transition: \"0.3s all\",\n              }}\n              src={value}\n              alt=\"\"\n            />\n            {loading || !image_loaded ? <SmallLoader active = {true}/> : ''}\n          </>\n        ) : (\n          <AddPhotoAlternateOutlinedIcon />\n        )}\n      </div>\n    );\n  }\n}\nfunction mapStateToProps({ global }) {\n  return { global };\n}\n\nexport default connect(mapStateToProps, actions)(Upload);\n"]},"metadata":{},"sourceType":"module"}