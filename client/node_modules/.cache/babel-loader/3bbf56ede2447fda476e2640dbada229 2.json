{"ast":null,"code":"import _toConsumableArray from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{withRouter}from\"react-router\";import{connect}from\"react-redux\";import*as actions from\"../../actions/actions\";import Assignment from\"./parts/Assignment\";import HandleAssignment from\"./parts/HandleAssignment\";import PopupWithFunction from\"../../parts/PopupWithFunction\";import{apiPostRequest,apiGetRequest}from\"../../tools/api\";import AssignmentLoader from\"./parts/AssignmentLoader\";import LibraryAddOutlinedIcon from'@material-ui/icons/LibraryAddOutlined';import BtnWithTooltip from\"../../parts/BtnWithTooltip\";import NoData from\"../../parts/NoData\";var AssignmentTemplates=/*#__PURE__*/function(_Component){_inherits(AssignmentTemplates,_Component);function AssignmentTemplates(){var _this;_classCallCheck(this,AssignmentTemplates);_this=_possibleConstructorReturn(this,_getPrototypeOf(AssignmentTemplates).call(this));_this.toggleHandleAssignment=function(status,assignment_to_edit){_this.setState({handle_assignment:status,assignment_to_edit:assignment_to_edit});};_this.handleRemove=function(assignment_to_remove){_this.setState({assignment_to_remove:assignment_to_remove});};_this.close=function(){_this.setState({assignment_to_remove:\"\",handle_assignment:\"\"});};_this.remove=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var assignment_to_remove,assignments_list,api,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:assignment_to_remove=_this.state.assignment_to_remove;assignments_list=_this.props.assignments.assignments_list;_this.setState({remove_loading:true});api=\"assignment/delete\";_context.next=6;return apiPostRequest(api,{id:assignment_to_remove._id});case 6:res=_context.sent;if(res.ok){_this.props.removeAssignment(assignment_to_remove,assignments_list);_this.close();}setTimeout(function(){_this.setState({remove_loading:false});},400);case 9:case\"end\":return _context.stop();}}},_callee);}));_this.create=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(assignment){var system_text,assignments_list,api,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:system_text=_this.props.global.system_text;assignments_list=_this.props.assignments.assignments_list;api=\"assignment\";_this.setState({loading:true});_context2.next=6;return apiPostRequest(api,assignment);case 6:res=_context2.sent;if(res.ok){_this.props.addAssignment(res.result,assignments_list);}_this.props.updateGlobalReducer(\"success\",system_text.ASSIGNMENT_CREATE_SUCCESS);_this.setState({loading:false});case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.edit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(assignment){var assignments_list,api,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:assignments_list=_this.props.assignments.assignments_list;api=\"assignment\";_this.setState({loading:true});_context3.next=5;return apiPostRequest(api,assignment);case 5:res=_context3.sent;if(res.ok){_this.props.updateAssignment(res.result,assignments_list);}_this.setState({loading:false});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.state={};return _this;}_createClass(AssignmentTemplates,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var api,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:api=\"assignment\";_context4.next=3;return apiGetRequest(api);case 3:res=_context4.sent;if(res.ok){this.props.setDataToAssignmentsReducer(\"assignments_list\",res.result);this.setState({assignments_loaded:true});}case 5:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var assignments_list=this.props.assignments.assignments_list;var _this$state=this.state,handle_assignment=_this$state.handle_assignment,assignment_to_edit=_this$state.assignment_to_edit,assignment_to_remove=_this$state.assignment_to_remove,loading=_this$state.loading,assignments_loaded=_this$state.assignments_loaded,remove_loading=_this$state.remove_loading;var system_text=this.props.global.system_text;return React.createElement(\"div\",{className:\"assignments\"},React.createElement(PopupWithFunction,{text:system_text.REMOVE_TEXT,name:\"\".concat(assignment_to_remove?assignment_to_remove.title:\"\",\"?\"),active:assignment_to_remove,submit:this.remove,close:this.close,submit_text:system_text.YES,close_text:system_text.NO,loading:remove_loading}),handle_assignment?React.createElement(HandleAssignment,{loading:loading,edit:this.edit,create:this.create,assignment_to_edit:assignment_to_edit,toggleHandleAssignment:this.toggleHandleAssignment}):\" \",React.createElement(\"div\",{className:\"page__flex\"},React.createElement(BtnWithTooltip,{svg:React.createElement(LibraryAddOutlinedIcon,null),handleClick:function handleClick(){return _this2.toggleHandleAssignment(true);},tooltip:system_text.CREATE}),React.createElement(\"ul\",{className:\"assignments__list flex__start\"},assignments_loaded&&assignments_list&&assignments_list.length>0?assignments_list.map(function(m){return React.createElement(Assignment,{m:m,system_text:system_text,handleRemove:_this2.handleRemove,toggleHandleAssignment:_this2.toggleHandleAssignment,key:m._id});}):!assignments_loaded?React.createElement(AssignmentLoader,{arr:_toConsumableArray(Array(3).keys())}):React.createElement(NoData,{text:system_text.NO_TEMPLATES}))));}}]);return AssignmentTemplates;}(Component);function mapStateToProps(_ref4){var assignments=_ref4.assignments,global=_ref4.global;return{assignments:assignments,global:global};}export default withRouter(connect(mapStateToProps,actions)(AssignmentTemplates));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/assignments/AssignmentTemplates.jsx"],"names":["React","Component","withRouter","connect","actions","Assignment","HandleAssignment","PopupWithFunction","apiPostRequest","apiGetRequest","AssignmentLoader","LibraryAddOutlinedIcon","BtnWithTooltip","NoData","AssignmentTemplates","toggleHandleAssignment","status","assignment_to_edit","setState","handle_assignment","handleRemove","assignment_to_remove","close","remove","state","assignments_list","props","assignments","remove_loading","api","id","_id","res","ok","removeAssignment","setTimeout","create","assignment","system_text","global","loading","addAssignment","result","updateGlobalReducer","ASSIGNMENT_CREATE_SUCCESS","edit","updateAssignment","setDataToAssignmentsReducer","assignments_loaded","REMOVE_TEXT","title","YES","NO","CREATE","length","map","m","Array","keys","NO_TEMPLATES","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../actions/actions\";\nimport Assignment from \"./parts/Assignment\";\nimport HandleAssignment from \"./parts/HandleAssignment\";\nimport PopupWithFunction from \"../../parts/PopupWithFunction\";\nimport { apiPostRequest, apiGetRequest } from \"../../tools/api\";\nimport AssignmentLoader from \"./parts/AssignmentLoader\";\nimport LibraryAddOutlinedIcon from '@material-ui/icons/LibraryAddOutlined';\nimport BtnWithTooltip from \"../../parts/BtnWithTooltip\";\nimport NoData from \"../../parts/NoData\";\n\nclass AssignmentTemplates extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  async componentDidMount() {\n    const api = `assignment`;\n    const res = await apiGetRequest(api);\n    if (res.ok) {\n      this.props.setDataToAssignmentsReducer(\"assignments_list\", res.result);\n      this.setState({\n        assignments_loaded: true,\n      });\n    }\n  }\n  toggleHandleAssignment = (status, assignment_to_edit) => {\n    this.setState({\n      handle_assignment: status,\n      assignment_to_edit,\n    });\n  };\n\n  handleRemove = (assignment_to_remove) => {\n    this.setState({\n      assignment_to_remove,\n    });\n  };\n\n  close = () => {\n    this.setState({\n      assignment_to_remove: \"\",\n      handle_assignment: \"\",\n    });\n  };\n  remove = async () => {\n    const { assignment_to_remove } = this.state;\n    const { assignments_list } = this.props.assignments;\n    this.setState({\n      remove_loading:true\n    })\n    const api = `assignment/delete`;\n    const res = await apiPostRequest(api, { id: assignment_to_remove._id });\n    if (res.ok) {\n      this.props.removeAssignment(assignment_to_remove, assignments_list);\n      this.close();\n    }\n   setTimeout(() => {\n    this.setState({\n      remove_loading:false\n    })\n   }, 400);\n  };\n\n  create = async (assignment) => {\n    const {system_text} = this.props.global\n    const { assignments_list } = this.props.assignments;\n    const api = \"assignment\";\n    this.setState({\n      loading: true,\n    });\n    const res = await apiPostRequest(api, assignment);\n\n    if (res.ok) {\n      this.props.addAssignment(res.result, assignments_list);\n    }\n    this.props.updateGlobalReducer(\n      \"success\",\n      system_text.ASSIGNMENT_CREATE_SUCCESS\n    );\n    this.setState({\n      loading: false,\n    });\n  };\n\n  edit = async (assignment) => {\n    const { assignments_list } = this.props.assignments;\n    const api = \"assignment\";\n    this.setState({\n      loading: true,\n    });\n    const res = await apiPostRequest(api, assignment);\n    if (res.ok) {\n      this.props.updateAssignment(res.result, assignments_list);\n    }\n    this.setState({\n      loading: false,\n    });\n  };\n\n  render() {\n    const { assignments_list } = this.props.assignments;\n    const {\n      handle_assignment,\n      assignment_to_edit,\n      assignment_to_remove,\n      loading,\n      assignments_loaded,\n      remove_loading\n    } = this.state;\n    const { system_text } = this.props.global;\n\n    return (\n      <div className=\"assignments\">\n        <PopupWithFunction\n          text={system_text.REMOVE_TEXT}\n          name={`${assignment_to_remove ? assignment_to_remove.title : \"\"}?`}\n          active={assignment_to_remove}\n          submit={this.remove}\n          close={this.close}\n          submit_text={system_text.YES}\n          close_text={system_text.NO}\n          loading ={remove_loading}\n        />\n        {handle_assignment ? (\n          <HandleAssignment\n            loading={loading}\n            edit={this.edit}\n            create={this.create}\n            assignment_to_edit={assignment_to_edit}\n            toggleHandleAssignment={this.toggleHandleAssignment}\n          />\n        ) : (\n          \" \"\n        )}\n\n        <div className=\"page__flex\">\n          <BtnWithTooltip\n            svg={<LibraryAddOutlinedIcon />}\n            handleClick={() => this.toggleHandleAssignment(true)}\n            tooltip={system_text.CREATE}\n          />\n          <ul className=\"assignments__list flex__start\">\n            {assignments_loaded &&\n            assignments_list &&\n            assignments_list.length > 0 ? (\n              assignments_list.map((m) => {\n                return (\n                  <Assignment\n                    m={m}\n                    system_text = {system_text}\n                    handleRemove={this.handleRemove}\n                    toggleHandleAssignment={this.toggleHandleAssignment}\n                    key={m._id}\n                  />\n                );\n              })\n            ) : !assignments_loaded ? (\n              <AssignmentLoader arr={[...Array(3).keys()]} />\n            ) : (\n              <NoData \n              text = {system_text.NO_TEMPLATES}\n              />\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ assignments, global }) {\n  return { assignments, global };\n}\n\nexport default withRouter(\n  connect(mapStateToProps, actions)(AssignmentTemplates)\n);\n"]},"metadata":{},"sourceType":"module"}