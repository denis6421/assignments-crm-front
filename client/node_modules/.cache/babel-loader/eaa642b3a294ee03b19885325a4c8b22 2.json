{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import*as actions from\"../../../../actions/actions\";import{apiPostRequest}from\"../../../../tools/api\";import SelectBox from\"../../../../parts/SelectBox\";import IsraelImg from\"../../../../images/flags/israel.svg\";import UsaImg from\"../../../../images/flags/usa.svg\";import SystemLoader from\"./SystemLoader\";import{Link}from'react-router-dom';import{SETTINGS_ROUTE,EMPLOYEE_DASHBOARD_SETTINGS}from\"../../../../tools/routes\";import NavigateBeforeIcon from'@material-ui/icons/NavigateBefore';var languages=[{name:\"English\",value:\"english\",img:UsaImg},{name:\"Hebrew\",value:\"hebrew\",img:IsraelImg}];var SystemSettings=/*#__PURE__*/function(_Component){_inherits(SystemSettings,_Component);function SystemSettings(){var _this;_classCallCheck(this,SystemSettings);_this=_possibleConstructorReturn(this,_getPrototypeOf(SystemSettings).call(this));_this.changeLanguage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(language){var user,api;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:user=_this.props.user.user;api=\"account-settings/update\";_this.setState({loading:true});setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:body={user:user._id,language:language.value};_context.prev=1;_context.next=4;return apiPostRequest(api,body).then(function(res){_this.props.setSystemLanguage(res.result.language);var selected=languages.filter(function(m){return m.value===res.result.language;})[0];_this.setState({selected:selected});});case 4:_context.next=8;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);case 8:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);})),500);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={};return _this;}_createClass(SystemSettings,[{key:\"componentDidMount\",value:function componentDidMount(){var language=this.props.global.language;var selected=languages.filter(function(m){return m.value===language;})[0];console.log(selected,language);this.setState({selected:selected});}},{key:\"render\",value:function render(){var _this2=this;var system_text=this.props.global.system_text;var _this$state=this.state,selected=_this$state.selected,loading=_this$state.loading;var user=this.props.user.user;return React.createElement(\"div\",{className:\"settings__system\"},React.createElement(\"header\",null,React.createElement(Link,{className:\"back__button flex__start\",to:user.is_manager?SETTINGS_ROUTE:EMPLOYEE_DASHBOARD_SETTINGS},React.createElement(NavigateBeforeIcon,null),system_text.SETTINGS)),loading?React.createElement(SystemLoader,{text:system_text.LANGUAGE_LOADING,close:function close(){return _this2.setState({loading:false});}}):'',React.createElement(\"section\",{className:\"settings__system__section\"},React.createElement(\"h2\",null,system_text.LANGUAGE_SELECT),React.createElement(SelectBox,{value:selected,options:languages,handleSelect:this.changeLanguage})));}}]);return SystemSettings;}(Component);function mapStateToProps(_ref3){var user=_ref3.user,global=_ref3.global;return{user:user,global:global};}export default connect(mapStateToProps,actions)(SystemSettings);","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/settings/categories/system/SystemSettings.jsx"],"names":["React","Component","connect","actions","apiPostRequest","SelectBox","SystemLoader","Link","SETTINGS_ROUTE","EMPLOYEE_DASHBOARD_SETTINGS","NavigateBeforeIcon","languages","name","value","img","UsaImg","IsraelImg","SystemSettings","changeLanguage","language","user","props","api","setState","loading","setTimeout","body","_id","then","res","setSystemLanguage","result","selected","filter","m","state","global","console","log","system_text","is_manager","SETTINGS","LANGUAGE_LOADING","LANGUAGE_SELECT","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../../actions/actions\";\nimport { apiPostRequest } from \"../../../../tools/api\";\nimport SelectBox from \"../../../../parts/SelectBox\";\nimport IsraelImg from \"../../../../images/flags/israel.svg\";\nimport UsaImg from \"../../../../images/flags/usa.svg\";\nimport SystemLoader from \"./SystemLoader\";\nimport {Link} from 'react-router-dom'\nimport { SETTINGS_ROUTE, EMPLOYEE_DASHBOARD_SETTINGS } from \"../../../../tools/routes\";\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nconst languages = [\n  { name: \"English\", value: \"english\", img: UsaImg },\n  { name: \"Hebrew\", value: \"hebrew\", img: IsraelImg },\n];\nclass SystemSettings extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const { language } = this.props.global;\n    let selected = languages.filter((m) => m.value === language)[0];\n    console.log(selected, language);\n    this.setState({\n      selected,\n    });\n  }\n  changeLanguage = async (language) => {\n    const { user } = this.props.user;\n    const api = \"account-settings/update\";\n    this.setState({\n        loading:true\n       })\n    setTimeout(async () => {\n        const body = {\n            user: user._id,\n            language: language.value,\n          };\n          try {\n            \n            await apiPostRequest(api, body).then((res) => {\n              this.props.setSystemLanguage(res.result.language);\n              let selected = languages.filter(\n                (m) => m.value === res.result.language\n              )[0];\n              this.setState({\n                selected,\n              });\n              \n            });\n          } catch (error) {\n            \n          }\n    }, 500);\n\n  };\n\n\n  render() {\n    const { system_text } = this.props.global;\n    const { selected, loading } = this.state;\n    const {user} =this.props.user\n    return (\n      <div className=\"settings__system\">\n          <header>\n        <Link\n        className='back__button flex__start'\n        to ={user.is_manager ? SETTINGS_ROUTE  :EMPLOYEE_DASHBOARD_SETTINGS}>\n          <NavigateBeforeIcon />{system_text.SETTINGS}\n        </Link>\n        </header>\n       {loading ? <SystemLoader\n       text = {system_text.LANGUAGE_LOADING}\n       close = {() => this.setState({loading:false})}\n       /> : ''}\n        <section className=\"settings__system__section\">\n          <h2>{system_text.LANGUAGE_SELECT}</h2>\n          <SelectBox\n            value={selected}\n            options={languages}\n            handleSelect={this.changeLanguage}\n          />\n        </section>\n      </div>\n    );\n  }\n}\nfunction mapStateToProps({ user, global }) {\n  return { user, global };\n}\n\nexport default connect(mapStateToProps, actions)(SystemSettings);\n"]},"metadata":{},"sourceType":"module"}