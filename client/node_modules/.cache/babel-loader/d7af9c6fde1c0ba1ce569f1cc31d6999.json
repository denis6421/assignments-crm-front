{"ast":null,"code":"import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Link,withRouter}from\"react-router-dom\";import SmallPopup from\"../../parts/SmallPopup\";import{connect}from\"react-redux\";import*as actions from\"../../actions/actions\";import{LOGIN_ROUTE,SETTINGS_ROUTE}from\"../../tools/routes\";import{removeCookie}from\"../../tools/cookie\";import{AUTH_TOKEN}from\"../../tools/keys\";import ExitToAppSharpIcon from\"@material-ui/icons/ExitToAppSharp\";import PersonIcon from\"@material-ui/icons/Person\";import MenuIcon from\"@material-ui/icons/Menu\";var isActive=function isActive(url,value){if(url.indexOf(value)>-1)return true;return false;};var Navbar=/*#__PURE__*/function(_Component){_inherits(Navbar,_Component);function Navbar(){var _this;_classCallCheck(this,Navbar);_this=_possibleConstructorReturn(this,_getPrototypeOf(Navbar).call(this));_this.logout=function(){removeCookie(AUTH_TOKEN);_this.props.history.push(LOGIN_ROUTE);window.location.reload();};_this.onLoad=function(){_this.setState({img_loaded:true});};_this.state={};return _this;}_createClass(Navbar,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextPros){this.setState({mobile_menu:false});var url=nextPros.location.pathname;this.setState({url:url});}},{key:\"componentDidMount\",value:function componentDidMount(){var url=window.location.pathname;this.setState({url:url,page_loaded:true});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,url=_this$state.url,page_loaded=_this$state.page_loaded,img_loaded=_this$state.img_loaded,mobile_menu=_this$state.mobile_menu;var user=this.props.user.user;var navigations=this.props.navigations;var system_text=this.props.global.system_text;var style={left:\"110%\",top:\"50%\",transform:\"translate(0, -50%)\"};return page_loaded?React.createElement(\"nav\",{className:\"navbar\"},React.createElement(\"div\",{style:{display:\"none\"},onClick:function onClick(){return _this2.setState({mobile_menu:!mobile_menu});},className:\"mobile__hamburger\"},React.createElement(MenuIcon,null)),React.createElement(\"figure\",{className:\"employee__img navbar__user__avatar\"},user&&user.avatar?React.createElement(React.Fragment,null,React.createElement(\"img\",{src:user.avatar,style:{opacity:img_loaded?1:0,transition:\"0.2s all\"},onLoad:function onLoad(){return _this2.onLoad();},alt:\"\"}),!img_loaded?React.createElement(\"aside\",{className:\"avatar__loader\"}):\"\"):React.createElement(PersonIcon,null)),React.createElement(\"section\",{id:mobile_menu?\"navbar__list--active\":\"\",className:\"navbar__list flex__column\"},React.createElement(\"aside\",{className:\"navbar__list__mobile__placeholder\",style:{display:'none'},onClick:function onClick(){return _this2.setState({mobile_menu:false});}}),navigations&&navigations.length>0?navigations.map(function(m,i){return React.createElement(Link,{id:isActive(url,m.value)?\"navbar__list__link--active\":\"\",className:\"navbar__list__link flex__center\",key:i,to:m.param?m.url.replace(m.param,user._id):m.url},m.img,React.createElement(SmallPopup,{arrow_class:\"arrow-left\",style:style,text:system_text[m.text]}));}):\"\"),React.createElement(\"button\",{style:{background:\"transparent\",border:\"0px\"},className:\"navbar__list__link navbar__logout__link\",onClick:function onClick(){return _this2.logout();}},React.createElement(SmallPopup,{arrow_class:\"arrow-left\",style:style,text:system_text.LOGOUT}),React.createElement(ExitToAppSharpIcon,null))):\"\";}}]);return Navbar;}(Component);function mapStateToProps(_ref){var employees=_ref.employees,navbar=_ref.navbar,user=_ref.user,global=_ref.global;return{employees:employees,navbar:navbar,user:user,global:global};}export default withRouter(connect(mapStateToProps,actions)(Navbar));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/navbar/Navbar.jsx"],"names":["React","Component","Link","withRouter","SmallPopup","connect","actions","LOGIN_ROUTE","SETTINGS_ROUTE","removeCookie","AUTH_TOKEN","ExitToAppSharpIcon","PersonIcon","MenuIcon","isActive","url","value","indexOf","Navbar","logout","props","history","push","window","location","reload","onLoad","setState","img_loaded","state","nextPros","mobile_menu","pathname","page_loaded","user","navigations","system_text","global","style","left","top","transform","display","avatar","opacity","transition","length","map","m","i","param","replace","_id","img","text","background","border","LOGOUT","mapStateToProps","employees","navbar"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport SmallPopup from \"../../parts/SmallPopup\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../actions/actions\";\nimport { LOGIN_ROUTE, SETTINGS_ROUTE } from \"../../tools/routes\";\nimport { removeCookie } from \"../../tools/cookie\";\nimport { AUTH_TOKEN } from \"../../tools/keys\";\nimport ExitToAppSharpIcon from \"@material-ui/icons/ExitToAppSharp\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nconst isActive = (url, value) => {\n  if (url.indexOf(value) > -1) return true;\n  return false;\n};\n\nclass Navbar extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n  componentWillReceiveProps(nextPros) {\n    this.setState({\n      mobile_menu:false\n    })\n    let url = nextPros.location.pathname;\n    this.setState({\n      url,\n    });\n  }\n  componentDidMount() {\n    let url = window.location.pathname;\n    this.setState({\n      url,\n      page_loaded: true,\n    });\n  }\n\n  logout = () => {\n    removeCookie(AUTH_TOKEN);\n    this.props.history.push(LOGIN_ROUTE);\n    window.location.reload();\n  };\n  onLoad = () => {\n    this.setState({\n      img_loaded: true,\n    });\n  };\n  render() {\n    const { url, page_loaded, img_loaded, mobile_menu } = this.state;\n    const { user } = this.props.user;\n    const { navigations } = this.props;\n    const { system_text } = this.props.global;\n    const style = {\n      left: \"110%\",\n      top: \"50%\",\n      transform: \"translate(0, -50%)\",\n    };\n    return page_loaded ? (\n      <nav className=\"navbar\">\n        <div\n          style={{\n            display: \"none\",\n          }}\n          onClick={() =>\n            this.setState({\n              mobile_menu: !mobile_menu,\n            })\n          }\n          className=\"mobile__hamburger\"\n        >\n          <MenuIcon />\n        </div>\n        <figure className=\"employee__img navbar__user__avatar\">\n          {user && user.avatar ? (\n            <>\n              <img\n                src={user.avatar}\n                style={{\n                  opacity: img_loaded ? 1 : 0,\n                  transition: \"0.2s all\",\n                }}\n                onLoad={() => this.onLoad()}\n                alt=\"\"\n              />\n              {!img_loaded ? <aside className=\"avatar__loader\"></aside> : \"\"}\n            </>\n          ) : (\n            <PersonIcon />\n          )}\n        </figure>\n        <section\n          id={mobile_menu ? \"navbar__list--active\" : \"\"}\n          className=\"navbar__list flex__column\"\n        >\n          <aside className='navbar__list__mobile__placeholder'\n          style ={{\n            display:'none'\n          }}\n          onClick = {() => this.setState({\n            mobile_menu:false\n          })}\n          ></aside>\n          {navigations && navigations.length > 0\n            ? navigations.map((m, i) => {\n                return (\n                  <Link\n                   \n                    id={\n                      isActive(url, m.value) ? \"navbar__list__link--active\" : \"\"\n                    }\n                    className=\"navbar__list__link flex__center\"\n                    key={i}\n                    to={m.param ? m.url.replace(m.param, user._id) : m.url}\n                  >\n                    {m.img}\n                    <SmallPopup\n                      arrow_class=\"arrow-left\"\n                      style={style}\n                      text={system_text[m.text]}\n                    />\n                  </Link>\n                );\n              })\n            : \"\"}\n        </section>\n        <button\n          style={{\n            background: \"transparent\",\n            border: \"0px\",\n          }}\n          className=\"navbar__list__link navbar__logout__link\"\n          onClick={() => this.logout()}\n        >\n          <SmallPopup\n            arrow_class=\"arrow-left\"\n            style={style}\n            text={system_text.LOGOUT}\n          />\n          <ExitToAppSharpIcon />\n        </button>\n      </nav>\n    ) : (\n      \"\"\n    );\n  }\n}\n\nfunction mapStateToProps({ employees, navbar, user, global }) {\n  return { employees, navbar, user, global };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(Navbar));\n"]},"metadata":{},"sourceType":"module"}