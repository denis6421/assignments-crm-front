{"ast":null,"code":"import _defineProperty from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/todo/front/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Upload from\"../../../parts/uploader/Uploader\";import TextInput from\"../../../parts/inputs/TextInput\";import inputs_data from\"./inputs-data\";import{connect}from\"react-redux\";import*as actions from\"../../../actions/actions\";import SwitchComponent from\"../../../parts/SwitchComponent\";import PasswordInput from\"../../../parts/inputs/PasswordInput\";import CloseIcon from\"@material-ui/icons/Close\";import SubmitButtons from\"../../../parts/SubmitButtons\";var HandleProfile=/*#__PURE__*/function(_Component){_inherits(HandleProfile,_Component);function HandleProfile(){var _this;_classCallCheck(this,HandleProfile);_this=_possibleConstructorReturn(this,_getPrototypeOf(HandleProfile).call(this));_this.updateProfile=function(name,value){var profile=_this.state.profile;var updated_profile=JSON.parse(JSON.stringify(profile));updated_profile[name]=value;_this.setState({profile:updated_profile});};_this.close=function(){_this.setState({profile:{},loaded:false});setTimeout(function(){_this.props.toggleHandleProfile();},400);};_this.submitForm=function(e){var _this$state=_this.state,profile=_this$state.profile,pw_changed=_this$state.pw_changed;e.preventDefault();_this.setState({validate:true});setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({validate:false});errors=document.querySelectorAll(\".text__input__error\");if(!(errors.length===0)){_context.next=7;break;}_this.setState({loading:true});_context.next=6;return _this.props.save(profile,pw_changed);case 6:_this.close();case 7:case\"end\":return _context.stop();}}},_callee);})),60);};_this.updateState=function(name,value){_this.setState(_defineProperty({},name,value));};_this.state={profile:{active:true}};return _this;}_createClass(HandleProfile,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;var profile_to_edit=this.props.profile_to_edit;setTimeout(function(){_this2.setState({loaded:true});},30);if(profile_to_edit){this.setState({profile:profile_to_edit,is_edit:true});}}},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,loaded=_this$state2.loaded,profile=_this$state2.profile,validate=_this$state2.validate,is_edit=_this$state2.is_edit,loading=_this$state2.loading;var _this$props=this.props,edit_text=_this$props.edit_text,create_text=_this$props.create_text,status_disabled=_this$props.status_disabled;var system_text=this.props.global.system_text;return React.createElement(\"div\",{id:loaded?\"employees__handle--active\":\"\",className:\"employees__handle\"},React.createElement(\"section\",{className:\"overlay\"}),React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this3.submitForm(e);},className:\"employees__handle__form flex__column\"},React.createElement(\"button\",{style:{opacity:loaded?1:0},type:\"button\",onClick:function onClick(){return _this3.close();},className:\"employees__handle__form__close\"},React.createElement(CloseIcon,null)),React.createElement(\"header\",{className:\"flex__between\"},React.createElement(\"h2\",{className:\"section__h2\"},is_edit?edit_text:create_text)),React.createElement(\"span\",{style:{alignItems:'flex-start'},className:\"flex__between\"},React.createElement(Upload,{property_name:\"avatar\",update:this.updateProfile,value:profile.avatar}),!status_disabled?React.createElement(SwitchComponent,{property_name:\"active\",value:profile.active,updateEmployee:this.updateProfile}):\"\"),React.createElement(\"div\",{className:\"employees__handle__form__info\"},inputs_data.map(function(input){switch(input.type){case\"password\":return React.createElement(PasswordInput,{handleUpdate:_this3.updateProfile,input:input,validate:validate,system_text:system_text,value:profile[input.property_name],is_edit:is_edit,updateParentState:_this3.updateState});default:return React.createElement(TextInput,{handleUpdate:_this3.updateProfile,input:input,system_text:system_text,validate:validate,value:profile[input.property_name]});}})),React.createElement(SubmitButtons,{close:this.close,submit_text:system_text.SAVE,close_text:system_text.CANCEL,loading:loading})));}}]);return HandleProfile;}(Component);function mapStateToProps(_ref2){var employees=_ref2.employees,user=_ref2.user,global=_ref2.global;return{employees:employees,user:user,global:global};}export default connect(mapStateToProps,actions)(HandleProfile);","map":{"version":3,"sources":["/Users/denis/Desktop/projects/todo/front/client/src/components/employees/parts/HandleProfile.jsx"],"names":["React","Component","Upload","TextInput","inputs_data","connect","actions","SwitchComponent","PasswordInput","CloseIcon","SubmitButtons","HandleProfile","updateProfile","name","value","profile","state","updated_profile","JSON","parse","stringify","setState","close","loaded","setTimeout","props","toggleHandleProfile","submitForm","e","pw_changed","preventDefault","validate","errors","document","querySelectorAll","length","loading","save","updateState","active","profile_to_edit","is_edit","edit_text","create_text","status_disabled","system_text","global","opacity","alignItems","avatar","map","input","type","property_name","SAVE","CANCEL","mapStateToProps","employees","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Upload from \"../../../parts/uploader/Uploader\";\nimport TextInput from \"../../../parts/inputs/TextInput\";\nimport inputs_data from \"./inputs-data\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../actions/actions\";\nimport SwitchComponent from \"../../../parts/SwitchComponent\";\nimport PasswordInput from \"../../../parts/inputs/PasswordInput\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport SubmitButtons from \"../../../parts/SubmitButtons\";\n\nclass HandleProfile extends Component {\n  constructor() {\n    super();\n    this.state = {\n      profile: { active: true },\n    };\n  }\n\n  componentWillMount() {\n    const { profile_to_edit } = this.props;\n    setTimeout(() => {\n      this.setState({\n        loaded: true,\n      });\n    }, 30);\n    if (profile_to_edit) {\n      this.setState({\n        profile: profile_to_edit,\n        is_edit: true,\n      });\n    }\n  }\n\n  updateProfile = (name, value) => {\n    const { profile } = this.state;\n    const updated_profile = JSON.parse(JSON.stringify(profile));\n    updated_profile[name] = value;\n    this.setState({\n      profile: updated_profile,\n    });\n  };\n\n  close = () => {\n    this.setState({\n      profile: {},\n      loaded: false,\n    });\n    setTimeout(() => {\n      this.props.toggleHandleProfile();\n    }, 400);\n  };\n\n  submitForm = (e) => {\n    const { profile, pw_changed } = this.state;\n    e.preventDefault();\n    this.setState({\n      validate: true,\n    });\n\n    setTimeout(async () => {\n      this.setState({\n        validate: false,\n      });\n      const errors = document.querySelectorAll(\".text__input__error\");\n      if (errors.length === 0) {\n        this.setState({\n          loading: true,\n        });\n        await this.props.save(profile, pw_changed);\n        this.close();\n      }\n    }, 60);\n  };\n  updateState = (name, value) => {\n    this.setState({\n      [name]: value,\n    });\n  };\n  render() {\n    const { loaded, profile, validate, is_edit, loading } = this.state;\n    const { edit_text, create_text, status_disabled } = this.props;\n    const { system_text } = this.props.global;\n    return (\n      <div\n        id={loaded ? \"employees__handle--active\" : \"\"}\n        className=\"employees__handle\"\n      >\n        <section className=\"overlay\"></section>\n        <form\n          onSubmit={(e) => this.submitForm(e)}\n          className=\"employees__handle__form flex__column\"\n        >\n          <button\n            style={{\n              opacity: loaded ? 1 : 0,\n            }}\n            type=\"button\"\n            onClick={() => this.close()}\n            className=\"employees__handle__form__close\"\n          >\n            <CloseIcon />\n          </button>\n          <header className=\"flex__between\">\n            <h2 className='section__h2'>{is_edit ? edit_text : create_text}</h2>\n          </header>\n          <span \n          style ={{\n            alignItems:'flex-start'\n          }}\n          className=\"flex__between\">\n            <Upload\n              property_name=\"avatar\"\n              update={this.updateProfile}\n              value={profile.avatar}\n            />\n            {!status_disabled ? (\n              <SwitchComponent\n                property_name=\"active\"\n                value={profile.active}\n                updateEmployee={this.updateProfile}\n              />\n            ) : (\n              \"\"\n            )}\n          </span>\n          <div className=\"employees__handle__form__info\">\n            {inputs_data.map((input) => {\n              switch (input.type) {\n                case \"password\":\n                  return (\n                    <PasswordInput\n                      handleUpdate={this.updateProfile}\n                      input={input}\n                      validate={validate}\n                      system_text={system_text}\n                      value={profile[input.property_name]}\n                      is_edit={is_edit}\n                      updateParentState={this.updateState}\n                    />\n                  );\n\n                default:\n                  return (\n                    <TextInput\n                      handleUpdate={this.updateProfile}\n                      input={input}\n                      system_text={system_text}\n                      validate={validate}\n                      value={profile[input.property_name]}\n                    />\n                  );\n              }\n            })}\n          </div>\n          <SubmitButtons\n            close={this.close}\n            submit_text={system_text.SAVE}\n            close_text={system_text.CANCEL}\n            loading={loading}\n          />\n        </form>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ employees, user, global }) {\n  return { employees, user, global };\n}\n\nexport default connect(mapStateToProps, actions)(HandleProfile);\n"]},"metadata":{},"sourceType":"module"}